(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{82198:function(e,n,i){Promise.resolve().then(i.bind(i,92440))},92440:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return ed}});var t=i(57437),r=i(93279),s=i(81705),l=i(81052),o=i(95784),a=i(59993),d=i(51095),c=i(1899),u=i(99962),x=i(28450),h=i(8984),p=i(5002),f=i(59832),m=i(35389),g=i(94013),b=i(67116),v=i(36476),j=i(92253),y=i(97404),Z=i(53392),S=i(79507),w=i(77468),C=i(9026),k=i(74731),R=i(24902),N=i(67571),I=i(8350),P=i(2265),L=i(99376),W=i(44236),D=i(8243),q=i(24322),F=i(17375),z=i(71304),E=i(43688),T=i(89414),K=i(67208),A=i(36137),O=i(91436),U=i(86810),B=i(10062),M=i(20407),Q=i(77719),H=i(42736),V=i(56940),G=i(97059),X=i(62994),Y=i(63790),_=i(27648),J=i(58094),$=i(9099);function ee(e){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function en(e){var n,i;let{onNavigateToUsers:r}=e;(0,$.t)(e=>e.token);let{data:s=[],isLoading:l}=(0,J.Rm)(),{data:o,isLoading:a}=(0,J.Xl)(),{data:d,isLoading:u}=(0,J.RB)(),{data:x=[]}=(0,J.ko)(),f=null!==(n=null==o?void 0:o.loans)&&void 0!==n?n:[],g=null!==(i=null==d?void 0:d.repayments)&&void 0!==i?i:[],b=Array.isArray(x)?x:[],v=(0,P.useMemo)(()=>{let e=s.length,n=s.filter(e=>e.verified).length,i=s.filter(e=>!e.verified).length,t=s.filter(e=>e.suspended).length,r=f.filter(e=>"PENDING"===e.status).length,l=f.filter(e=>"APPROVED"===e.status).length,o=f.filter(e=>"DISBURSED"===e.status).length,a=f.filter(e=>"REPAID"===e.status).length,d=f.filter(e=>"REJECTED"===e.status).length,c=f.filter(e=>["APPROVED","DISBURSED","REPAID"].includes(e.status)).reduce((e,n)=>e+n.amount,0),u=g.reduce((e,n)=>e+n.amount,0);return{totalUsers:e,verifiedUsers:n,pendingVerification:i,suspendedUsers:t,verifiedPct:e>0?n/e*100:0,pendingLoans:r,approvedLoans:l,disbursedLoans:o,repaidLoans:a,rejectedLoans:d,totalDisbursed:c,totalRepaid:u,totalOutstanding:c-u,repaymentRate:c>0?u/c*100:0,totalProviders:b.length}},[s,f,g,b]),j=(0,P.useMemo)(()=>[{name:"Pending",value:v.pendingLoans,color:"#f59e0b"},{name:"Approved",value:v.approvedLoans,color:"#0b7b4c"},{name:"Disbursed",value:v.disbursedLoans,color:"#22c55e"},{name:"Repaid",value:v.repaidLoans,color:"#7c3aed"},{name:"Rejected",value:v.rejectedLoans,color:"#ef4444"}].filter(e=>e.value>0),[v]),y=(0,P.useMemo)(()=>[{name:"Verified",value:v.verifiedUsers,color:"#0b7b4c"},{name:"Pending",value:v.pendingVerification,color:"#f59e0b"},{name:"Suspended",value:v.suspendedUsers,color:"#ef4444"}].filter(e=>e.value>0),[v]),Z=(0,P.useMemo)(()=>[{name:"Disbursed",amount:v.totalDisbursed,fill:"#0b7b4c"},{name:"Repaid",amount:v.totalRepaid,fill:"#22c55e"},{name:"Outstanding",amount:v.totalOutstanding,fill:"#f59e0b"}],[v]);return l||a||u?(0,t.jsxs)(h.Z,{alignItems:"center",justifyContent:"center",sx:{py:8},children:[(0,t.jsx)(m.Z,{sx:{color:"#0b7b4c"}}),(0,t.jsx)(p.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Loading dashboard..."})]}):(0,t.jsxs)(h.Z,{spacing:3,children:[(0,t.jsx)(p.Z,{variant:"h5",fontWeight:700,children:"Dashboard Overview"}),(0,t.jsxs)(T.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(T.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:(0,t.jsx)(A.Z,{children:(0,t.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,t.jsx)(c.Z,{sx:{width:44,height:44,borderRadius:2,bgcolor:"#E8F5EF",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(q.Z,{sx:{color:"#0b7b4c",fontSize:24}})}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",children:"Total Users"}),(0,t.jsx)(p.Z,{variant:"h6",fontWeight:700,children:v.totalUsers}),(0,t.jsxs)(p.Z,{variant:"caption",color:"text.secondary",children:[v.verifiedPct.toFixed(0),"% verified"]})]})]})})})}),(0,t.jsx)(T.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:(0,t.jsx)(A.Z,{children:(0,t.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,t.jsx)(c.Z,{sx:{width:44,height:44,borderRadius:2,bgcolor:"#FFF8E1",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(z.Z,{sx:{color:"#f59e0b",fontSize:24}})}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",children:"Pending Loans"}),(0,t.jsx)(p.Z,{variant:"h6",fontWeight:700,children:v.pendingLoans}),(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:"Awaiting approval"})]})]})})})}),(0,t.jsx)(T.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:(0,t.jsx)(A.Z,{children:(0,t.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,t.jsx)(c.Z,{sx:{width:44,height:44,borderRadius:2,bgcolor:"#E8F5EF",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(E.Z,{sx:{color:"#0b7b4c",fontSize:24}})}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",children:"Total Disbursed"}),(0,t.jsx)(p.Z,{variant:"h6",fontWeight:700,children:ee(v.totalDisbursed)}),(0,t.jsxs)(p.Z,{variant:"caption",color:"text.secondary",children:[v.repaymentRate.toFixed(0),"% repaid"]})]})]})})})}),(0,t.jsx)(T.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:(0,t.jsx)(A.Z,{children:(0,t.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,t.jsx)(c.Z,{sx:{width:44,height:44,borderRadius:2,bgcolor:"#EDE9FE",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(F.Z,{sx:{color:"#7c3aed",fontSize:24}})}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",children:"Providers"}),(0,t.jsx)(p.Z,{variant:"h6",fontWeight:700,children:v.totalProviders}),(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:"Funding partners"})]})]})})})})]}),(0,t.jsxs)(T.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(T.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)",height:"100%"},children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Loan Status"}),j.length>0?(0,t.jsx)(O.h,{width:"100%",height:180,children:(0,t.jsxs)(U.u,{children:[(0,t.jsx)(B.by,{data:j,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",children:j.map((e,n)=>(0,t.jsx)(M.b,{fill:e.color},n))}),(0,t.jsx)(Q.u,{})]})}):(0,t.jsx)(p.Z,{variant:"body2",color:"text.secondary",children:"No loan data yet"})]})})}),(0,t.jsx)(T.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)",height:"100%"},children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"User Status"}),y.length>0?(0,t.jsx)(O.h,{width:"100%",height:180,children:(0,t.jsxs)(U.u,{children:[(0,t.jsx)(B.by,{data:y,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",children:y.map((e,n)=>(0,t.jsx)(M.b,{fill:e.color},n))}),(0,t.jsx)(Q.u,{})]})}):(0,t.jsx)(p.Z,{variant:"body2",color:"text.secondary",children:"No user data yet"})]})})}),(0,t.jsx)(T.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)",height:"100%"},children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Finance Overview (₦)"}),(0,t.jsx)(O.h,{width:"100%",height:220,children:(0,t.jsxs)(H.v,{data:Z,margin:{top:10,right:10,left:0,bottom:0},children:[(0,t.jsx)(V.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,t.jsx)(G.K,{dataKey:"name",tick:{fontSize:12}}),(0,t.jsx)(X.B,{tick:{fontSize:12},tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,t.jsx)(Q.u,{formatter:e=>null!=e?ee(Number(e)):""}),(0,t.jsx)(Y.$Q,{dataKey:"amount",radius:[4,4,0,0]})]})})]})})})]}),(0,t.jsx)(K.Z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Quick Actions"}),(0,t.jsxs)(h.Z,{direction:"row",flexWrap:"wrap",gap:2,sx:{mt:1},children:[(0,t.jsx)(c.Z,{component:r?"button":_.default,href:r?void 0:"/dashboard",onClick:r,sx:{px:2,py:1,borderRadius:2,bgcolor:"#e8f5ef",color:"#0b7b4c",fontWeight:600,fontSize:14,cursor:"pointer",border:"none",textDecoration:"none","&:hover":{bgcolor:"#d4edda"}},children:"Manage Users"}),(0,t.jsx)(_.default,{href:"/dashboard/loan-request",style:{textDecoration:"none"},children:(0,t.jsxs)(c.Z,{sx:{px:2,py:1,borderRadius:2,bgcolor:"#fff8e1",color:"#f59e0b",fontWeight:600,fontSize:14,cursor:"pointer","&:hover":{bgcolor:"#ffecb3"}},children:["Loan Requests",v.pendingLoans>0&&(0,t.jsx)(c.Z,{component:"span",sx:{ml:1,px:1,py:.25,borderRadius:1,bgcolor:"#ef4444",color:"#fff",fontSize:12},children:v.pendingLoans})]})}),(0,t.jsx)(_.default,{href:"/dashboard/loan-repayment",style:{textDecoration:"none"},children:(0,t.jsx)(c.Z,{sx:{px:2,py:1,borderRadius:2,bgcolor:"#ede9fe",color:"#7c3aed",fontWeight:600,fontSize:14,cursor:"pointer","&:hover":{bgcolor:"#ddd6fe"}},children:"Loan Repayments"})}),(0,t.jsx)(_.default,{href:"/dashboard/providers",style:{textDecoration:"none"},children:(0,t.jsx)(c.Z,{sx:{px:2,py:1,borderRadius:2,bgcolor:"#f3f3f3",color:"#374151",fontWeight:600,fontSize:14,cursor:"pointer","&:hover":{bgcolor:"#e5e7eb"}},children:"Providers"})})]})]})})]})}var ei=i(84061),et=i(67801),er=i(735);function es(e){let{isVisible:n,suspended:i,onChatClick:s,onEditClick:o,onLoansClick:a,onDeleteClick:d,onSuspendClick:c}=e;return(0,t.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",sx:{opacity:n?1:0,pointerEvents:n?"auto":"none",transition:"opacity 0.2s ease"},children:[(0,t.jsx)(f.Z,{size:"small",onClick:s,"aria-label":"Open chat",children:(0,t.jsx)(ei.Z,{fontSize:"small"})}),(0,t.jsx)(f.Z,{size:"small",onClick:a,"aria-label":"View loans & wallet",children:(0,t.jsx)(F.Z,{fontSize:"small"})}),(0,t.jsx)(f.Z,{size:"small",onClick:o,"aria-label":"Edit user",children:(0,t.jsx)(er.Z,{fontSize:"small"})}),c&&(0,t.jsx)(g.Z,{size:"small",variant:"outlined",color:i?"success":"warning",startIcon:i?(0,t.jsx)(l.Z,{}):(0,t.jsx)(r.Z,{}),onClick:c,sx:{minWidth:0,px:1},children:i?"Unsuspend":"Suspend"}),(0,t.jsx)(f.Z,{size:"small",onClick:d,"aria-label":"Delete user",children:(0,t.jsx)(et.Z,{fontSize:"small"})})]})}var el=i(53675);function eo(e){var n,i,t,r;let s=[e.firstName,e.lastName].filter(Boolean).join(" ")||e.email||"—";return{id:e.id,name:s,code:null!==(n=e.userNumber)&&void 0!==n?n:e.id,behaviour:"Good",suspended:null!==(i=e.suspended)&&void 0!==i&&i,verified:null!==(t=e.verified)&&void 0!==t&&t,picture:null!==(r=e.picture)&&void 0!==r?r:null}}function ea(){var e,n,i,q,F,z,E,T,K,A,O,U,B,M,Q,H,V,G,X,Y,_,ee;let ei=(0,L.useRouter)(),et=null!==(q=(0,L.useSearchParams)().get("tab"))&&void 0!==q?q:"overview",er=(0,$.t)(e=>e.token),[ea,ed]=(0,P.useState)(""),[ec,eu]=(0,P.useState)("all"),[ex,eh]=(0,P.useState)(0),[ep,ef]=(0,P.useState)(1),[em,eg]=(0,P.useState)(!1),[eb,ev]=(0,P.useState)(null),[ej,ey]=(0,P.useState)(!1),[eZ,eS]=(0,P.useState)([]),[ew,eC]=(0,P.useState)(""),[ek,eR]=(0,P.useState)(null),[eN,eI]=(0,P.useState)(null),[eP,eL]=(0,P.useState)({firstName:"",lastName:"",picture:"",creditLimit:""}),[eW,eD]=(0,P.useState)(!1),[eq,eF]=(0,P.useState)(0),[ez,eE]=(0,P.useState)(null),[eT,eK]=(0,P.useState)(""),[eA,eO]=(0,P.useState)(""),{data:eU=[],isLoading:eB,isError:eM,error:eQ,refetch:eH,isFetching:eV}=(0,J.Rm)(),{data:eG,isLoading:eX}=(0,J.XO)(null!==(F=null==eN?void 0:eN.id)&&void 0!==F?F:null),eY=(0,J.hV)(),e_=(0,J.Y7)(),{data:eJ}=(0,J.l2)(null!==(z=null==ez?void 0:ez.id)&&void 0!==z?z:null),{data:e$}=(0,J.HI)(null!==(E=null==ez?void 0:ez.id)&&void 0!==E?E:null),{data:e0}=(0,J.It)(null!==(T=null==ez?void 0:ez.id)&&void 0!==T?T:null),{data:e2}=(0,J.P7)(null!==(K=null==ez?void 0:ez.id)&&void 0!==K?K:null),{data:e1}=(0,J.XO)(null!==(A=null==ez?void 0:ez.id)&&void 0!==A?A:null),e4=(0,J.pv)(),e7=null!==(O=null==eJ?void 0:eJ.loans)&&void 0!==O?O:[],e3=null!==(U=null==e0?void 0:e0.repayments)&&void 0!==U?U:[],e5=null!==(B=null==e2?void 0:e2.availableAmount)&&void 0!==B?B:0,e6=null!==(M=null==e2?void 0:e2.canRequest)&&void 0!==M&&M&&e5>0;(0,P.useEffect)(()=>{eM&&!er&&ei.replace("/")},[eM,er,ei]),(0,P.useEffect)(()=>{if(eG&&(null==eN?void 0:eN.id)===eG.id){var e,n,i;eL({firstName:null!==(e=eG.firstName)&&void 0!==e?e:"",lastName:null!==(n=eG.lastName)&&void 0!==n?n:"",picture:null!==(i=eG.picture)&&void 0!==i?i:"",creditLimit:null!=eG.creditLimit?String(eG.creditLimit):""})}},[eG,null==eN?void 0:eN.id]);let e9=(0,P.useMemo)(()=>eU.map(eo),[eU]),e8=(0,P.useMemo)(()=>{let e=e9;if("suspended"===ec?e=e.filter(e=>e.suspended):"pending"===ec&&(e=e.filter(e=>!e.verified)),ea.trim()){let n=ea.trim().toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(n)||e.code.toLowerCase().includes(n))}return e},[e9,ea,ec]),ne=Math.max(1,Math.ceil(e8.length/10)),nn=(ep-1)*10,ni=e8.slice(nn,nn+10);return(0,P.useEffect)(()=>{if(!eb)return;ey(!0);let e=window.setTimeout(()=>{eS([{id:1,sender:"user",text:"Hi, I need help with my loan approval.",time:"09:20"},{id:2,sender:"admin",text:"Sure, can you confirm your offline code?",time:"09:22"},{id:3,sender:"user",text:eb.code,time:"09:23"}]),ey(!1)},500);return()=>window.clearTimeout(e)},[eb]),(0,t.jsxs)(c.Z,{component:W.E.div,initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},children:[(0,t.jsxs)(u.Z,{value:et,onChange:(e,n)=>{ei.push("overview"===n?"/dashboard":"/dashboard?tab=users")},sx:{marginBottom:2,"& .MuiTab-root":{textTransform:"none",fontWeight:600},"& .MuiTabs-indicator":{backgroundColor:"#0b7b4c"},"& .Mui-selected":{color:"#0b7b4c"}},children:[(0,t.jsx)(x.Z,{label:"Overview",value:"overview"}),(0,t.jsx)(x.Z,{label:"Users",value:"users"})]}),"overview"===et?(0,t.jsx)(en,{onNavigateToUsers:()=>ei.push("/dashboard?tab=users")}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Z,{search:ea,onSearchChange:ed}),(0,t.jsx)(c.Z,{sx:{background:"#ffffff",borderRadius:{xs:0,md:2},padding:{xs:2,md:3.5},paddingBottom:{xs:3,md:4},marginTop:{xs:2,md:3},marginX:{xs:-2,md:0},minHeight:"calc(100vh - 220px)",display:"flex",flexDirection:"column"},children:(0,t.jsx)(h.Z,{sx:{marginTop:"auto"},spacing:2,children:(0,t.jsxs)(c.Z,{sx:{borderRadius:3,padding:2,backgroundColor:"#f3f3f3",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(h.Z,{spacing:2,sx:{marginBottom:2,paddingTop:2,paddingLeft:2},children:[(0,t.jsxs)(h.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:1,children:[(0,t.jsx)(p.Z,{variant:"h6",sx:{fontWeight:700,marginTop:{xs:1,md:2}},children:"USERS"}),(0,t.jsx)(f.Z,{size:"small",onClick:()=>eH(),disabled:eV,"aria-label":"Refresh list",children:(0,t.jsx)(o.Z,{})})]}),(0,t.jsxs)(u.Z,{value:ec,onChange:(e,n)=>{eu(n),ef(1)},sx:{minHeight:36,"& .MuiTab-root":{minHeight:36,textTransform:"none",fontWeight:600},"& .MuiTabs-indicator":{backgroundColor:"#0b7b4c"},"& .Mui-selected":{color:"#0b7b4c"}},children:[(0,t.jsx)(x.Z,{label:"All profiles",value:"all"}),(0,t.jsx)(x.Z,{label:(0,t.jsxs)(h.Z,{direction:"row",spacing:.5,alignItems:"center",children:[(0,t.jsx)("span",{children:"Pending verification"}),e9.filter(e=>!e.verified).length>0&&(0,t.jsx)(c.Z,{sx:{minWidth:18,height:18,borderRadius:999,backgroundColor:"#F59E0B",color:"#fff",fontSize:11,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",px:.5},children:e9.filter(e=>!e.verified).length})]}),value:"pending"}),(0,t.jsx)(x.Z,{label:"Suspended",value:"suspended"})]})]}),(0,t.jsxs)(c.Z,{sx:{fontSize:12,color:"text.secondary",marginBottom:2,backgroundColor:"#fff",borderRadius:999,paddingY:1.2,paddingX:3,display:{xs:"none",md:"grid"},gridTemplateColumns:{md:"2fr 1fr 1fr 0.9fr 1fr"},alignItems:"center",gap:1},children:[(0,t.jsx)(c.Z,{children:"Name"}),(0,t.jsx)(c.Z,{children:"Offline code"}),(0,t.jsx)(c.Z,{children:"Behaviour"}),(0,t.jsx)(c.Z,{children:"Status"}),(0,t.jsx)(c.Z,{children:"Action"})]}),(0,t.jsx)(c.Z,{sx:{marginTop:1,maxHeight:{xs:420,sm:"none"},overflowY:{xs:"auto",sm:"visible"}},children:eB?(0,t.jsxs)(h.Z,{alignItems:"center",py:4,children:[(0,t.jsx)(m.Z,{sx:{color:"#0b7b4c"}}),(0,t.jsx)(p.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Loading users..."})]}):eM?(0,t.jsxs)(h.Z,{alignItems:"center",py:4,spacing:2,children:[(0,t.jsx)(p.Z,{color:"error",children:eQ.message}),(0,t.jsx)(g.Z,{variant:"outlined",onClick:()=>eH(),size:"small",children:"Retry"})]}):(0,t.jsx)(h.Z,{spacing:0,children:ni.map((e,n)=>{var i,s;let o=nn+n;return(0,t.jsxs)(c.Z,{onClick:()=>eh(o),sx:{paddingY:2,paddingX:{xs:2,md:3},borderBottom:n===ni.length-1?"none":"1px solid #fff",backgroundColor:ex===o?"#ffffff":"transparent",display:{xs:"flex",md:"grid"},flexDirection:{xs:"column",md:"unset"},gridTemplateColumns:{md:"2fr 1fr 1fr 0.9fr 1fr"},alignItems:"center",gap:{xs:1.5,md:1},cursor:"pointer",transition:"background-color 0.2s ease",borderRadius:1,outline:ex===o?"1px solid #32b25c":"1px solid transparent",outlineOffset:"-1px","&:hover":{backgroundColor:"#ffffff",outline:"1px solid #32b25c"}},children:[(0,t.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,t.jsx)(b.Z,{src:e.picture||void 0,sx:{width:32,height:32},children:(null!==(s=null===(i=e.name)||void 0===i?void 0:i[0])&&void 0!==s?s:"?").toUpperCase()}),(0,t.jsx)(p.Z,{variant:"body2",children:e.name})]}),(0,t.jsxs)(c.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Offline code"}),(0,t.jsx)(p.Z,{variant:"body2",children:e.code})]}),(0,t.jsxs)(c.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Behaviour"}),ex===o?(0,t.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,t.jsx)(es,{isVisible:!0,suspended:e.suspended,onChatClick:()=>{ev({id:e.id,name:e.name,code:e.code}),eg(!0)},onLoansClick:()=>{eE({id:e.id,name:e.name}),eK(""),eO("")},onEditClick:()=>{let n=eU.find(n=>n.id===e.id);if(n){var i,t,r;eI(n),eL({firstName:null!==(i=n.firstName)&&void 0!==i?i:"",lastName:null!==(t=n.lastName)&&void 0!==t?t:"",picture:null!==(r=n.picture)&&void 0!==r?r:"",creditLimit:null!=n.creditLimit?String(n.creditLimit):""})}},onDeleteClick:()=>{eR({id:e.id,name:e.name,code:e.code})}})}):(0,t.jsx)(p.Z,{variant:"body2",children:e.behaviour})]}),(0,t.jsx)(c.Z,{sx:{display:{xs:"none",md:"flex"},alignItems:"center"},children:(0,t.jsx)(p.Z,{variant:"body2",sx:{color:e.suspended?"error.main":e.verified?"#0b7b4c":"#F59E0B",fontWeight:500},children:e.suspended?"Suspended":e.verified?"Active":"Pending"})}),(0,t.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:.5,gridColumn:{xs:"1 / -1",md:"auto"},justifyContent:{xs:"flex-start",md:"center"},flexWrap:"wrap"},children:[!e.verified&&(0,t.jsx)(g.Z,{size:"small",variant:"contained",color:"success",startIcon:(0,t.jsx)(d.Z,{sx:{fontSize:16}}),onClick:n=>{n.stopPropagation(),eY.mutate({id:e.id,payload:{verified:!0}})},disabled:eY.isPending,sx:{minWidth:0,px:1,fontSize:12,backgroundColor:"#0b7b4c"},children:"Verify"}),(0,t.jsx)(g.Z,{size:"small",variant:"outlined",color:e.suspended?"success":"warning",startIcon:e.suspended?(0,t.jsx)(l.Z,{sx:{fontSize:18}}):(0,t.jsx)(r.Z,{sx:{fontSize:18}}),onClick:n=>{n.stopPropagation(),eY.mutate({id:e.id,payload:{suspended:!e.suspended}})},disabled:eY.isPending,sx:{minWidth:0,px:1},children:e.suspended?"Unsuspend":"Suspend"})]})]},"".concat(e.id))})})}),(0,t.jsx)(h.Z,{alignItems:"center",sx:{marginTop:2},children:(0,t.jsx)(v.Z,{count:ne,page:ep,onChange:(e,n)=>{ef(n),eh((n-1)*10)},color:"primary"})})]})})}),(0,t.jsx)(j.ZP,{anchor:"right",open:em,onClose:()=>{eg(!1),eC("")},PaperProps:{sx:{width:{xs:"100%",sm:360},padding:3}},children:(0,t.jsxs)(h.Z,{spacing:3,sx:{height:"100%"},children:[(0,t.jsxs)(h.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsxs)(h.Z,{spacing:.5,children:[(0,t.jsx)(p.Z,{variant:"h6",fontWeight:700,children:eb?eb.name:"User chat"}),(0,t.jsxs)(p.Z,{variant:"body2",color:"text.secondary",children:["User ID: ",null!==(Q=null==eb?void 0:eb.id)&&void 0!==Q?Q:"--"]})]}),(0,t.jsx)(f.Z,{"aria-label":"Close chat",onClick:()=>{eg(!1),eC("")},children:(0,t.jsx)(s.Z,{})})]}),(0,t.jsx)(c.Z,{sx:{flex:1,backgroundColor:"#f3f3f3",borderRadius:1,padding:2,overflowY:"auto"},children:(0,t.jsx)(h.Z,{spacing:2,children:ej?(0,t.jsx)(p.Z,{color:"text.secondary",children:"Loading chat..."}):eZ.map(e=>(0,t.jsxs)(c.Z,{sx:{alignSelf:"admin"===e.sender?"flex-end":"flex-start",backgroundColor:"admin"===e.sender?"#0b7b4c":"#ffffff",color:"admin"===e.sender?"#ffffff":"text.primary",padding:1.5,borderRadius:1,maxWidth:"80%"},children:[(0,t.jsx)(p.Z,{variant:"body2",children:e.text}),(0,t.jsx)(p.Z,{variant:"caption",sx:{opacity:.7},children:e.time})]},e.id))})}),(0,t.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,t.jsx)(y.Z,{fullWidth:!0,placeholder:"Type a message...",value:ew,onChange:e=>eC(e.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5,backgroundColor:"#fff"}}}),(0,t.jsx)(f.Z,{color:"primary",onClick:()=>{if(!ew.trim())return;let e=new Date,n="".concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"));eS(e=>[...e,{id:e.length+1,sender:"admin",text:ew.trim(),time:n}]),eC("")},sx:{backgroundColor:"#0b7b4c",color:"#fff","&:hover":{backgroundColor:"#096b3d"}},children:(0,t.jsx)(a.Z,{})})]})]})}),(0,t.jsx)(j.ZP,{anchor:"right",open:!!ez,onClose:()=>eE(null),PaperProps:{sx:{width:{xs:"100%",sm:420},padding:2}},children:(0,t.jsxs)(h.Z,{spacing:2,sx:{height:"100%",overflow:"hidden"},children:[(0,t.jsxs)(h.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsxs)(p.Z,{variant:"h6",fontWeight:700,children:[null!==(H=null==ez?void 0:ez.name)&&void 0!==H?H:"User"," – Loans & wallet"]}),(0,t.jsx)(f.Z,{"aria-label":"Close",onClick:()=>eE(null),children:(0,t.jsx)(s.Z,{})})]}),(0,t.jsx)(c.Z,{sx:{flex:1,overflowY:"auto"},children:ez&&(0,t.jsxs)(h.Z,{spacing:2,children:[(null==e1?void 0:e1.ninSlip)&&(0,t.jsxs)(c.Z,{sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider"},children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"NIN Slip"}),(0,t.jsx)(c.Z,{component:"a",href:e1.ninSlip,target:"_blank",rel:"noopener noreferrer",sx:{display:"block",borderRadius:1,overflow:"hidden",border:"1px solid #e4e7ec",cursor:"pointer","&:hover":{opacity:.9},maxHeight:160},children:(0,t.jsx)(c.Z,{component:"img",src:e1.ninSlip,alt:"NIN slip",sx:{width:"100%",height:"auto",display:"block",maxHeight:160,objectFit:"cover"}})}),(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:"Click to open full size"})]}),null!=e$&&(0,t.jsxs)(c.Z,{sx:{p:2,borderRadius:2,backgroundColor:"#f3f3f3"},children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",children:"Wallet"}),(0,t.jsxs)(p.Z,{variant:"h6",sx:{color:"#0b7b4c"},children:[e$.currency," ",Number(e$.balance).toLocaleString()]})]}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Loan history"}),0===e7.length?(0,t.jsx)(p.Z,{variant:"body2",children:"No loans yet."}):(0,t.jsx)(h.Z,{spacing:1,children:e7.map(e=>(0,t.jsxs)(c.Z,{sx:{p:1.5,borderRadius:1,border:"1px solid",borderColor:"divider"},children:[(0,t.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(p.Z,{variant:"body2",fontWeight:600,children:["NGN ",Number(e.amount).toLocaleString()]}),(0,t.jsx)(p.Z,{variant:"caption",sx:{color:"REPAID"===e.status?"#22c55e":"PENDING"===e.status||"APPROVED"===e.status?"#f59e0b":"#6b7280",fontWeight:600},children:e.status})]}),e.purpose&&(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",display:"block",children:e.purpose}),(0,t.jsxs)(p.Z,{variant:"caption",color:"text.secondary",children:["Repaid: ",Number(e.amountRepaid).toLocaleString()," \xb7 Created"," ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"—"]})]},e.id))})]}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(p.Z,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Repayment history"}),0===e3.length?(0,t.jsx)(p.Z,{variant:"body2",children:"No repayments yet."}):(0,t.jsxs)(h.Z,{spacing:1,children:[e3.slice(0,10).map(e=>(0,t.jsx)(c.Z,{sx:{py:.5,px:1,borderRadius:1,backgroundColor:"#f9fafb"},children:(0,t.jsxs)(p.Z,{variant:"body2",children:[Number(e.amount).toLocaleString()," \xb7"," ",new Date(e.repaidAt).toLocaleString()]})},e.id)),e3.length>10&&(0,t.jsxs)(p.Z,{variant:"caption",color:"text.secondary",children:["+",e3.length-10," more"]})]})]}),(0,t.jsxs)(c.Z,{sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider"},children:[(0,t.jsx)(p.Z,{variant:"subtitle2",sx:{mb:2},children:"Request loan for user"}),e2&&(0,t.jsx)(p.Z,{variant:"body2",color:"text.secondary",sx:{mb:2,p:1.5,bgcolor:"action.hover",borderRadius:1},children:null!==(V=e2.reason)&&void 0!==V?V:e6?"Can borrow up to ₦".concat(e5.toLocaleString()):"Cannot request a loan at this time."}),(0,t.jsxs)(h.Z,{spacing:1.5,children:[(0,t.jsx)(y.Z,{label:"Amount",type:"number",size:"small",fullWidth:!0,value:eT,onChange:e=>eK(e.target.value),placeholder:"e.g. ".concat(Math.min(e5||5e3,5e4)),inputProps:{min:1,max:e5||void 0},disabled:!e6,helperText:e6&&e5>0?"Max: ₦".concat(e5.toLocaleString()):void 0}),(0,t.jsx)(y.Z,{label:"Purpose (optional)",size:"small",fullWidth:!0,value:eA,onChange:e=>eO(e.target.value),placeholder:"e.g. Working capital",disabled:!e6}),e4.isError&&(0,t.jsx)(p.Z,{variant:"body2",color:"error",children:e4.error.message}),(0,t.jsx)(g.Z,{variant:"contained",disabled:!e6||e4.isPending||!eT||0>=Number(eT)||Number(eT)>e5,onClick:()=>{!ez||!eT||0>=Number(eT)||e4.mutate({userId:ez.id,amount:Number(eT),purpose:eA.trim()||void 0},{onSuccess:()=>{eK(""),eO("")}})},sx:{backgroundColor:"#0b7b4c"},children:e4.isPending?"Submitting...":"Request loan"})]})]})]})})]})}),(0,t.jsxs)(Z.Z,{open:!!ek,onClose:()=>!e_.isPending&&eR(null),PaperProps:{sx:{borderRadius:2}},children:[(0,t.jsx)(S.Z,{children:"Delete user"}),(0,t.jsxs)(w.Z,{children:[(0,t.jsxs)(p.Z,{children:["Are you sure you want to delete"," ",(0,t.jsx)("strong",{children:null!==(G=null==ek?void 0:ek.name)&&void 0!==G?G:""}),"? Their wallet and loan history will also be deleted. This action cannot be undone."]}),e_.isError&&(0,t.jsx)(p.Z,{color:"error",sx:{mt:2},children:e_.error.message})]}),(0,t.jsxs)(C.Z,{sx:{px:3,pb:2},children:[(0,t.jsx)(g.Z,{onClick:()=>eR(null),disabled:e_.isPending,children:"Cancel"}),(0,t.jsx)(g.Z,{variant:"contained",color:"error",disabled:e_.isPending,onClick:()=>{ek&&e_.mutate(ek.id,{onSuccess:()=>{eR(null),eh(-1)}})},children:e_.isPending?"Deleting...":"Delete"})]})]}),(0,t.jsxs)(Z.Z,{open:!!eN,onClose:()=>!eY.isPending&&eI(null),PaperProps:{sx:{borderRadius:2}},maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(S.Z,{sx:{pb:0},children:"User profile"}),(0,t.jsx)(w.Z,{sx:{pt:1},children:eX?(0,t.jsxs)(h.Z,{spacing:2,sx:{pt:2},children:[(0,t.jsxs)(h.Z,{alignItems:"center",spacing:1,children:[(0,t.jsx)(k.Z,{variant:"circular",width:80,height:80}),(0,t.jsx)(k.Z,{width:160,height:16})]}),[1,2,3,4,5].map(e=>(0,t.jsx)(k.Z,{height:36},e))]}):(0,t.jsxs)(h.Z,{spacing:2.5,sx:{pt:1},children:[(0,t.jsxs)(h.Z,{alignItems:"center",spacing:1,children:[(0,t.jsxs)(c.Z,{sx:{position:"relative"},children:[(0,t.jsx)(b.Z,{src:eP.picture||(null==eG?void 0:eG.picture)||void 0,sx:{width:80,height:80,fontSize:28},children:((null===(e=eP.firstName)||void 0===e?void 0:e[0])||(null===(n=eP.lastName)||void 0===n?void 0:n[0])||(null==eN?void 0:null===(i=eN.email)||void 0===i?void 0:i[0])||"?").toUpperCase()}),(null==eG?void 0:eG.verified)&&(0,t.jsx)(R.Z,{title:"Verified",children:(0,t.jsx)(c.Z,{sx:{position:"absolute",bottom:0,right:0,bgcolor:"#0b7b4c",borderRadius:"50%",width:22,height:22,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white"},children:(0,t.jsx)(d.Z,{sx:{fontSize:13,color:"white"}})})})]}),(0,t.jsxs)(h.Z,{alignItems:"center",spacing:.2,children:[(0,t.jsxs)(p.Z,{variant:"subtitle2",fontWeight:700,children:[null==eG?void 0:eG.firstName," ",null==eG?void 0:eG.lastName]}),(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:null==eG?void 0:eG.email}),(0,t.jsxs)(h.Z,{direction:"row",spacing:.5,sx:{mt:.5},children:[(0,t.jsx)(N.Z,{label:(null==eG?void 0:eG.verified)?"Verified":"Pending verification",size:"small",sx:{backgroundColor:(null==eG?void 0:eG.verified)?"#e8f5ef":"#fff8e1",color:(null==eG?void 0:eG.verified)?"#0b7b4c":"#92400e",fontWeight:600,fontSize:11}}),(null==eG?void 0:eG.suspended)&&(0,t.jsx)(N.Z,{label:"Suspended",size:"small",color:"error",sx:{fontWeight:600,fontSize:11}})]})]}),(0,t.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},id:"edit-user-image-upload",onChange:async e=>{var n;let i=null===(n=e.target.files)||void 0===n?void 0:n[0];if(i&&eN){eD(!0);try{let e=await (0,el.Ix)(i,{folder:"stillplay/avatars",token:er});eL(n=>({...n,picture:e.secureUrl})),eY.mutate({id:eN.id,payload:{picture:e.secureUrl}},{onSuccess:()=>{eI(n=>n?{...n,picture:e.secureUrl}:null)}})}catch(e){console.error(e)}finally{eD(!1),eF(e=>e+1)}}}},eq),(0,t.jsx)(g.Z,{size:"small",variant:"outlined",component:"label",htmlFor:"edit-user-image-upload",disabled:eW||eY.isPending,children:eW?"Uploading...":"Change photo"})]}),(0,t.jsx)(I.Z,{}),(0,t.jsxs)(h.Z,{spacing:0,children:[(0,t.jsx)(p.Z,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{mb:1,letterSpacing:.5},children:"REGISTRATION DETAILS"}),[["User number",null!==(X=null==eG?void 0:eG.userNumber)&&void 0!==X?X:"—"],["Email",null!==(Y=null==eG?void 0:eG.email)&&void 0!==Y?Y:"—"],["NIN",null!==(_=null==eG?void 0:eG.nin)&&void 0!==_?_:"—"],["Role",null!==(ee=null==eG?void 0:eG.role)&&void 0!==ee?ee:"—"],["Registered",(null==eG?void 0:eG.createdAt)?new Date(eG.createdAt).toLocaleDateString():"—"]].map(e=>{let[n,i]=e;return(0,t.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{py:.8,borderBottom:"1px solid #f3f3f3"},children:[(0,t.jsx)(p.Z,{variant:"body2",color:"text.secondary",sx:{minWidth:110},children:n}),(0,t.jsx)(p.Z,{variant:"body2",fontWeight:500,sx:{textAlign:"right",wordBreak:"break-all"},children:i})]},n)})]}),(null==eG?void 0:eG.ninSlip)?(0,t.jsxs)(h.Z,{spacing:1,children:[(0,t.jsx)(p.Z,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{letterSpacing:.5},children:"NIN SLIP"}),(0,t.jsx)(c.Z,{component:"a",href:eG.ninSlip,target:"_blank",rel:"noopener noreferrer",sx:{display:"block",borderRadius:2,overflow:"hidden",border:"1px solid #e4e7ec",cursor:"pointer","&:hover":{opacity:.85},maxHeight:200},children:(0,t.jsx)(c.Z,{component:"img",src:eG.ninSlip,alt:"NIN slip",sx:{width:"100%",height:"auto",display:"block",maxHeight:200,objectFit:"cover"}})}),(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:"Click image to open full size in a new tab."})]}):(0,t.jsx)(c.Z,{sx:{borderRadius:2,border:"1px dashed #e4e7ec",p:2,textAlign:"center",backgroundColor:"#fafafa"},children:(0,t.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:"No NIN slip uploaded"})}),(0,t.jsx)(I.Z,{}),(0,t.jsxs)(h.Z,{spacing:0,children:[(0,t.jsx)(p.Z,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{mb:1.5,letterSpacing:.5},children:"EDIT PROFILE"}),(0,t.jsxs)(h.Z,{spacing:1.5,children:[(0,t.jsx)(y.Z,{label:"First name",value:eP.firstName,onChange:e=>eL(n=>({...n,firstName:e.target.value})),fullWidth:!0,size:"small"}),(0,t.jsx)(y.Z,{label:"Last name",value:eP.lastName,onChange:e=>eL(n=>({...n,lastName:e.target.value})),fullWidth:!0,size:"small"}),(0,t.jsx)(y.Z,{label:"Credit limit (₦)",type:"number",value:eP.creditLimit,onChange:e=>eL(n=>({...n,creditLimit:e.target.value})),fullWidth:!0,size:"small",placeholder:"Default from settings (e.g. 5000)",helperText:"Max total outstanding. Empty = use app default.",inputProps:{min:0,step:100}})]})]}),eY.isError&&(0,t.jsx)(p.Z,{color:"error",variant:"body2",children:eY.error.message})]})}),(0,t.jsxs)(C.Z,{sx:{px:3,pb:2},children:[(0,t.jsx)(g.Z,{onClick:()=>eI(null),disabled:eY.isPending,children:"Cancel"}),(0,t.jsx)(g.Z,{variant:"contained",disabled:eY.isPending||eX,onClick:()=>{if(!eN)return;let e=eP.creditLimit.trim();eY.mutate({id:eN.id,payload:{firstName:eP.firstName.trim()||void 0,lastName:eP.lastName.trim()||void 0,picture:eP.picture.trim()||void 0,creditLimit:""===e?null:(()=>{let n=Number(e);return Number.isNaN(n)?void 0:n})()}},{onSuccess:()=>eI(null)})},sx:{backgroundColor:"#0b7b4c"},children:eY.isPending?"Saving...":"Save changes"})]})]})]})]})}function ed(){return(0,t.jsx)(P.Suspense,{fallback:(0,t.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,t.jsx)(m.Z,{})}),children:(0,t.jsx)(ea,{})})}},8243:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var t=i(57437),r=i(59869),s=i(8984),l=i(97404),o=i(23996),a=i(1899);function d(e){let{search:n,onSearchChange:i}=e;return(0,t.jsxs)(s.Z,{direction:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",spacing:2,sx:{marginBottom:3},children:[(0,t.jsx)(l.Z,{placeholder:"Search",value:n,onChange:e=>i(e.target.value),InputProps:{startAdornment:(0,t.jsx)(o.Z,{position:"start",children:(0,t.jsx)(r.Z,{sx:{color:"#97a6a0"}})})},sx:{width:{xs:"100%",sm:320,md:380},alignSelf:{xs:"stretch",md:"flex-start"},"& .MuiOutlinedInput-root":{backgroundColor:"#f3f3f3",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}}),(0,t.jsx)(a.Z,{})]})}},58094:function(e,n,i){"use strict";i.d(n,{Cx:function(){return v},HI:function(){return Z},Hv:function(){return I},It:function(){return y},OL:function(){return b},P7:function(){return S},RB:function(){return k},Rm:function(){return c},XO:function(){return u},Xl:function(){return C},Y7:function(){return f},Yn:function(){return P},bA:function(){return p},cy:function(){return R},ez:function(){return g},hV:function(){return x},ko:function(){return m},l2:function(){return j},pv:function(){return w},ur:function(){return N},yf:function(){return h}});var t=i(11713),r=i(29827),s=i(21770),l=i(9099),o=i(53675);let a={all:["admin"],users:()=>[...a.all,"users"],user:e=>[...a.users(),e],employees:()=>[...a.all,"employees"],activity:()=>[...a.all,"activity"],settings:()=>[...a.all,"settings"],loans:{all:()=>[...a.all,"loans","all"],allRepayments:()=>[...a.all,"loans","repayments","all"],userLoans:e=>[...a.all,"loans","user",e],userRepayments:e=>[...a.all,"loans","repayments","user",e],userWallet:e=>[...a.all,"loans","wallet",e],userEligibility:e=>[...a.all,"loans","eligibility",e]}},d={all:["providers"],list:()=>[...d.all,"list"]};function c(){let e=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.users(),queryFn:()=>(0,o.zO)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function u(e){let n=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:[...a.users(),"detail",e],queryFn:()=>(0,o.eJ)(n,e),enabled:!!n&&!!e,staleTime:3e4})}function x(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>{let{id:i,payload:t}=n;return(0,o.vr)(e,i,t)},onSuccess:()=>{n.invalidateQueries({queryKey:a.users()}),p({action:"User edited"}),n.invalidateQueries({queryKey:a.activity()})}})}function h(e){let n=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:[...a.activity(),null!=e?e:50],queryFn:()=>(0,o.Cy)(n,e),enabled:!!n,staleTime:3e4})}function p(e){let n=l.t.getState().token;n&&(0,o.BX)(n,e).catch(()=>{})}function f(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>(0,o.Er)(e,n),onSuccess:()=>{n.invalidateQueries({queryKey:a.users()}),p({action:"User deleted"}),n.invalidateQueries({queryKey:a.activity()})}})}function m(){let e=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:d.list(),queryFn:()=>(0,o.xp)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function g(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>(0,o.Qz)(e,n),onSuccess:()=>{n.invalidateQueries({queryKey:d.list()}),p({action:"Provider added"}),n.invalidateQueries({queryKey:a.activity()})}})}function b(){let e=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.employees(),queryFn:()=>(0,o.vG)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function v(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>(0,o.r8)(e,n),onSuccess:()=>{n.invalidateQueries({queryKey:a.employees()}),p({action:"Staff/employee created"}),n.invalidateQueries({queryKey:a.activity()})}})}function j(e){let n=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.loans.userLoans(null!=e?e:""),queryFn:()=>(0,o.hJ)(n,e),enabled:!!n&&!!e,staleTime:3e4})}function y(e){let n=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.loans.userRepayments(null!=e?e:""),queryFn:()=>(0,o.Rt)(n,e),enabled:!!n&&!!e,staleTime:3e4})}function Z(e){let n=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.loans.userWallet(null!=e?e:""),queryFn:()=>(0,o.p0)(n,e),enabled:!!n&&!!e,staleTime:3e4})}function S(e){let n=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.loans.userEligibility(null!=e?e:""),queryFn:()=>(0,o.Hd)(n,e),enabled:!!n&&!!e,staleTime:15e3})}function w(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>(0,o.G7)(e,n),onSuccess:(e,i)=>{n.invalidateQueries({queryKey:a.loans.userLoans(i.userId)}),n.invalidateQueries({queryKey:a.loans.userWallet(i.userId)}),n.invalidateQueries({queryKey:a.loans.userRepayments(i.userId)}),n.invalidateQueries({queryKey:a.loans.userEligibility(i.userId)}),n.invalidateQueries({queryKey:a.loans.all()}),n.invalidateQueries({queryKey:a.loans.allRepayments()})}})}function C(){let e=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.loans.all(),queryFn:()=>(0,o.cA)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:3e4})}function k(){let e=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.loans.allRepayments(),queryFn:()=>(0,o.Cb)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:3e4})}function R(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>(0,o.xl)(e,n),onSuccess:()=>{n.invalidateQueries({queryKey:a.loans.all()}),p({action:"Loan approved"}),n.invalidateQueries({queryKey:a.activity()})}})}function N(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>(0,o.ey)(e,n),onSuccess:()=>{n.invalidateQueries({queryKey:a.loans.all()}),p({action:"Loan rejected"}),n.invalidateQueries({queryKey:a.activity()})}})}function I(){let e=(0,l.t)(e=>e.token);return(0,t.a)({queryKey:a.settings(),queryFn:()=>(0,o.hO)(e),enabled:!!e,staleTime:6e4})}function P(){let e=(0,l.t)(e=>e.token),n=(0,r.NL)();return(0,s.D)({mutationFn:n=>{let{key:i,value:t}=n;return(0,o.WD)(e,i,t)},onSuccess:()=>{n.invalidateQueries({queryKey:a.settings()})}})}}},function(e){e.O(0,[515,330,262,666,140,404,236,713,448,857,887,270,683,872,746,925,675,971,117,744],function(){return e(e.s=82198)}),_N_E=e.O()}]);