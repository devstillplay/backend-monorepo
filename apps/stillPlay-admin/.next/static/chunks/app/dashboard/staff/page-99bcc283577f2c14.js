(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{4340:function(e,t,a){Promise.resolve().then(a.bind(a,5122))},5122:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Q}});var r=a(7437),n=a(1554),i=a(5784),o=a(1899),s=a(8984),l=a(5002),d=a(9832),c=a(4013),u=a(5389),m=a(3392),p=a(9507),x=a(7468),f=a(7404),h=a(1327),g=a(20),v=a(7414),b=a(4610),Z=a(1119),y=a(2265),j=a(1994),C=a(801),k=a(4031),w=a(6210),I=a(4765),S=a(7053),R=a(5566),O=a(9472),P=a(4217),L=a(118),M=a(2596),N=a(4143);let W=(0,N.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),B=(0,N.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var T=a(738);function A(e){return(0,T.ZP)("MuiMenuItem",e)}let F=(0,N.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),q=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],E=e=>{let{disabled:t,dense:a,divider:r,disableGutters:n,selected:i,classes:o}=e,s=(0,C.Z)({root:["root",a&&"dense",t&&"disabled",!n&&"gutters",r&&"divider",i&&"selected"]},A,o);return(0,Z.Z)({},o,s)},V=(0,w.ZP)(O.Z,{shouldForwardProp:e=>(0,I.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:a}=e;return(0,Z.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(F.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,k.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(F.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,k.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(F.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,k.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,k.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(F.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(F.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(M.Z.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(M.Z.inset)]:{marginLeft:52},["& .".concat(B.root)]:{marginTop:0,marginBottom:0},["& .".concat(B.inset)]:{paddingLeft:36},["& .".concat(W.root)]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,Z.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(W.root," svg")]:{fontSize:"1.25rem"}}))}),D=y.forwardRef(function(e,t){let a;let n=(0,S.i)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:l=!1,disableGutters:d=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:m,className:p}=n,x=(0,b.Z)(n,q),f=y.useContext(R.Z),h=y.useMemo(()=>({dense:s||f.dense||!1,disableGutters:d}),[f.dense,s,d]),g=y.useRef(null);(0,P.Z)(()=>{i&&g.current&&g.current.focus()},[i]);let v=(0,Z.Z)({},n,{dense:h.dense,divider:l,disableGutters:d}),C=E(n),k=(0,L.Z)(g,t);return n.disabled||(a=void 0!==m?m:-1),(0,r.jsx)(R.Z.Provider,{value:h,children:(0,r.jsx)(V,(0,Z.Z)({ref:k,role:u,tabIndex:a,component:o,focusVisibleClassName:(0,j.Z)(C.focusVisible,c),className:(0,j.Z)(C.root,p)},x,{ownerState:v,classes:C}))})});var z=a(2279),_=a(9026),Y=a(9376),H=a(4236),G=a(8243),X=a(8094),J=a(9099),K=a(3675);function Q(){let e=(0,Y.useRouter)(),t=(0,J.t)(e=>e.token),[a,b]=(0,y.useState)(""),[Z,j]=(0,y.useState)(!1),[C,k]=(0,y.useState)(""),[w,I]=(0,y.useState)(""),[S,R]=(0,y.useState)(""),[O,P]=(0,y.useState)(""),[L,M]=(0,y.useState)(K.jY[0]),{data:N=[],isLoading:W,isError:B,error:T,refetch:A,isFetching:F}=(0,X.OL)(),q=(0,X.Cx)();(0,y.useEffect)(()=>{B&&!t&&e.replace("/")},[B,t,e]);let E=(0,y.useMemo)(()=>{if(!a.trim())return N;let e=a.trim().toLowerCase();return N.filter(t=>{var a,r,n,i,o;return(null===(a=t.firstName)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(r=t.lastName)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.email)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(i=t.employeeNumber)||void 0===i?void 0:i.toLowerCase().includes(e))||(null===(o=t.role)||void 0===o?void 0:o.toLowerCase().includes(e))})},[N,a]),V=()=>{k(""),I(""),R(""),P(""),M(K.jY[0]),j(!1)};return(0,r.jsxs)(o.Z,{component:H.E.div,initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},children:[(0,r.jsx)(G.Z,{search:a,onSearchChange:b}),(0,r.jsx)(o.Z,{sx:{background:"#ffffff",borderRadius:{xs:0,md:2},padding:{xs:2,md:3.5},paddingBottom:{xs:3,md:4},marginTop:{xs:2,md:3},marginX:{xs:-2,md:0},minHeight:"calc(100vh - 220px)",display:"flex",flexDirection:"column"},children:(0,r.jsx)(s.Z,{spacing:2,children:(0,r.jsxs)(o.Z,{sx:{borderRadius:3,padding:2,backgroundColor:"#f3f3f3",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:1,sx:{marginBottom:2,paddingTop:2,paddingLeft:2},children:[(0,r.jsx)(l.Z,{variant:"h6",sx:{fontWeight:700},children:"STAFF"}),(0,r.jsxs)(s.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(d.Z,{size:"small",onClick:()=>A(),disabled:F,"aria-label":"Refresh list",children:(0,r.jsx)(i.Z,{})}),(0,r.jsx)(c.Z,{variant:"contained",size:"small",startIcon:(0,r.jsx)(n.Z,{}),onClick:()=>j(!0),sx:{backgroundColor:"#0b7b4c"},children:"Create Admin Account"})]})]}),(0,r.jsxs)(o.Z,{sx:{fontSize:12,color:"text.secondary",marginBottom:2,backgroundColor:"#fff",borderRadius:999,paddingY:1.2,paddingX:3,display:{xs:"none",md:"grid"},gridTemplateColumns:{md:"1.5fr 1.2fr 0.9fr 1.2fr 0.6fr"},alignItems:"center",gap:1},children:[(0,r.jsx)(o.Z,{children:"Name"}),(0,r.jsx)(o.Z,{children:"Email"}),(0,r.jsx)(o.Z,{children:"Employee #"}),(0,r.jsx)(o.Z,{children:"Role"}),(0,r.jsx)(o.Z,{children:"Status"})]}),(0,r.jsx)(o.Z,{sx:{marginTop:1},children:W?(0,r.jsxs)(s.Z,{alignItems:"center",py:4,children:[(0,r.jsx)(u.Z,{sx:{color:"#0b7b4c"}}),(0,r.jsx)(l.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Loading staff..."})]}):B?(0,r.jsxs)(s.Z,{alignItems:"center",py:4,spacing:2,children:[(0,r.jsx)(l.Z,{color:"error",children:T.message}),(0,r.jsx)(c.Z,{variant:"outlined",onClick:()=>A(),size:"small",children:"Retry"})]}):0===E.length?(0,r.jsx)(l.Z,{color:"text.secondary",sx:{py:4,textAlign:"center"},children:"No staff yet. Create an admin account to get started."}):(0,r.jsx)(s.Z,{spacing:0,children:E.map(e=>{var t,a,n;return(0,r.jsxs)(o.Z,{sx:{paddingY:2,paddingX:{xs:2,md:3},borderBottom:"1px solid #fff",display:{xs:"flex",md:"grid"},flexDirection:{xs:"column",md:"unset"},gridTemplateColumns:{md:"1.5fr 1.2fr 0.9fr 1.2fr 0.6fr"},alignItems:"center",gap:{xs:1,md:1},backgroundColor:"#ffffff",borderRadius:1,"&:hover":{backgroundColor:"#fafafa"}},children:[(0,r.jsx)(l.Z,{variant:"body2",fontWeight:600,children:[e.firstName,e.lastName].filter(Boolean).join(" ")||"—"}),(0,r.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:null!==(t=e.email)&&void 0!==t?t:"—"}),(0,r.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:null!==(a=e.employeeNumber)&&void 0!==a?a:"—"}),(0,r.jsx)(l.Z,{variant:"body2",children:null!==(n=e.role)&&void 0!==n?n:"—"}),(0,r.jsx)(l.Z,{variant:"body2",sx:{color:e.active?"#0b7b4c":"text.secondary",fontWeight:500},children:e.active?"Active":"Inactive"})]},e.id)})})})]})})}),(0,r.jsxs)(m.Z,{open:Z,onClose:V,PaperProps:{sx:{borderRadius:2}},maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(p.Z,{children:"Create Admin Account"}),(0,r.jsx)(x.Z,{children:(0,r.jsxs)(s.Z,{spacing:2,sx:{pt:1},children:[(0,r.jsx)(f.Z,{label:"First name",required:!0,fullWidth:!0,value:C,onChange:e=>k(e.target.value),placeholder:"Jane"}),(0,r.jsx)(f.Z,{label:"Last name",required:!0,fullWidth:!0,value:w,onChange:e=>I(e.target.value),placeholder:"Doe"}),(0,r.jsx)(f.Z,{label:"Email",type:"email",required:!0,fullWidth:!0,value:S,onChange:e=>R(e.target.value),placeholder:"admin@example.com"}),(0,r.jsx)(f.Z,{label:"Password",type:"password",required:!0,fullWidth:!0,value:O,onChange:e=>P(e.target.value),placeholder:"••••••••"}),(0,r.jsxs)(h.Z,{fullWidth:!0,required:!0,children:[(0,r.jsx)(g.Z,{id:"staff-role-label",children:"Role"}),(0,r.jsx)(v.Z,{labelId:"staff-role-label",value:L,label:"Role",onChange:e=>M(e.target.value),children:K.jY.map(e=>(0,r.jsx)(D,{value:e,children:e},e))})]}),q.isError&&(0,r.jsx)(z.Z,{severity:"error",children:q.error.message})]})}),(0,r.jsxs)(_.Z,{sx:{px:3,pb:2},children:[(0,r.jsx)(c.Z,{onClick:V,children:"Cancel"}),(0,r.jsx)(c.Z,{variant:"contained",onClick:()=>{let e=C.trim(),t=w.trim(),a=S.trim();e&&t&&a&&O&&q.mutate({firstName:e,lastName:t,email:a,password:O,role:L},{onSuccess:()=>V()})},disabled:!C.trim()||!w.trim()||!S.trim()||!O||q.isPending,sx:{backgroundColor:"#0b7b4c"},children:q.isPending?"Creating...":"Create"})]})]})]})}},8243:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var r=a(7437),n=a(9869),i=a(8984),o=a(7404),s=a(3996),l=a(1899);function d(e){let{search:t,onSearchChange:a}=e;return(0,r.jsxs)(i.Z,{direction:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",spacing:2,sx:{marginBottom:3},children:[(0,r.jsx)(o.Z,{placeholder:"Search",value:t,onChange:e=>a(e.target.value),InputProps:{startAdornment:(0,r.jsx)(s.Z,{position:"start",children:(0,r.jsx)(n.Z,{sx:{color:"#97a6a0"}})})},sx:{width:{xs:"100%",sm:320,md:380},alignSelf:{xs:"stretch",md:"flex-start"},"& .MuiOutlinedInput-root":{backgroundColor:"#f3f3f3",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}}),(0,r.jsx)(l.Z,{})]})}},2596:function(e,t,a){"use strict";a.d(t,{V:function(){return i}});var r=a(4143),n=a(738);function i(e){return(0,n.ZP)("MuiDivider",e)}let o=(0,r.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=o},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[165,43,498,262,404,49,135,713,549,396,94,971,117,744],function(){return e(e.s=4340)}),_N_E=e.O()}]);