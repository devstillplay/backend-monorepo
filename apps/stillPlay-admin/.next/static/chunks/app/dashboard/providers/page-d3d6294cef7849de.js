(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{5844:function(e,r,n){Promise.resolve().then(n.bind(n,3254))},3254:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return w}});var t=n(7437),i=n(1554),a=n(5784),s=n(1899),o=n(8984),d=n(5002),l=n(9832),c=n(4013),u=n(5389),x=n(3392),m=n(9507),g=n(7468),h=n(7404),p=n(2279),f=n(9026),v=n(2265),j=n(4236),Z=n(8243),b=n(8094),y=n(3675);function C(e){return null==e?"—":new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function w(){let[e,r]=(0,v.useState)(""),[n,w]=(0,v.useState)(!1),[k,N]=(0,v.useState)(""),[A,S]=(0,v.useState)(""),[R,W]=(0,v.useState)(""),[P,I]=(0,v.useState)(""),[T,D]=(0,v.useState)(""),[E,L]=(0,v.useState)(""),{data:O=[],isLoading:F,isError:_,error:z,refetch:B,isFetching:G}=(0,b.ko)(),M=(0,b.ez)(),X=(0,v.useMemo)(()=>{if(!e.trim())return O;let r=e.trim().toLowerCase();return O.filter(e=>{var n,t;return e.name.toLowerCase().includes(r)||(null!==(n=e.email)&&void 0!==n?n:"").toLowerCase().includes(r)||(null!==(t=e.providerNumber)&&void 0!==t?t:"").toLowerCase().includes(r)})},[O,e]),Y=()=>{N(""),S(""),W(""),I(""),D(""),L(""),w(!1)};return(0,t.jsxs)(s.Z,{component:j.E.div,initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},children:[(0,t.jsx)(Z.Z,{search:e,onSearchChange:r}),(0,t.jsx)(s.Z,{sx:{background:"#ffffff",borderRadius:{xs:0,md:2},padding:{xs:2,md:3.5},paddingBottom:{xs:3,md:4},marginTop:{xs:2,md:3},marginX:{xs:-2,md:0},minHeight:"calc(100vh - 220px)",display:"flex",flexDirection:"column"},children:(0,t.jsx)(o.Z,{spacing:2,children:(0,t.jsxs)(s.Z,{sx:{borderRadius:3,padding:2,backgroundColor:"#f3f3f3",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:1,sx:{marginBottom:2,paddingTop:2,paddingLeft:2},children:[(0,t.jsx)(d.Z,{variant:"h6",sx:{fontWeight:700},children:"PROVIDERS"}),(0,t.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,t.jsx)(l.Z,{size:"small",onClick:()=>B(),disabled:G,"aria-label":"Refresh list",children:(0,t.jsx)(a.Z,{})}),(0,t.jsx)(c.Z,{variant:"contained",size:"small",startIcon:(0,t.jsx)(i.Z,{}),onClick:()=>w(!0),sx:{backgroundColor:"#0b7b4c"},children:"Register provider"})]})]}),(0,t.jsxs)(s.Z,{sx:{fontSize:12,color:"text.secondary",marginBottom:2,backgroundColor:"#fff",borderRadius:999,paddingY:1.2,paddingX:3,display:{xs:"none",md:"grid"},gridTemplateColumns:{md:"1.2fr 0.9fr 1fr 0.9fr 0.7fr 0.9fr 0.9fr 1.2fr"},alignItems:"center",gap:1},children:[(0,t.jsx)(s.Z,{children:"Name"}),(0,t.jsx)(s.Z,{children:"Provider #"}),(0,t.jsx)(s.Z,{children:"Email"}),(0,t.jsx)(s.Z,{children:"Amount"}),(0,t.jsx)(s.Z,{children:"Agreed %"}),(0,t.jsx)(s.Z,{children:"Final amount"}),(0,t.jsx)(s.Z,{children:"Agreed date"}),(0,t.jsx)(s.Z,{children:"Agreed terms"})]}),(0,t.jsx)(s.Z,{sx:{marginTop:1},children:F?(0,t.jsxs)(o.Z,{alignItems:"center",py:4,children:[(0,t.jsx)(u.Z,{sx:{color:"#0b7b4c"}}),(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Loading providers..."})]}):_?(0,t.jsxs)(o.Z,{alignItems:"center",py:4,spacing:2,children:[(0,t.jsx)(d.Z,{color:"error",children:z.message}),(0,t.jsx)(c.Z,{variant:"outlined",onClick:()=>B(),size:"small",children:"Retry"})]}):0===X.length?(0,t.jsx)(d.Z,{color:"text.secondary",sx:{py:4,textAlign:"center"},children:"No providers yet. Register one to get started."}):(0,t.jsx)(o.Z,{spacing:0,children:X.map(e=>{var r,n,i;return(0,t.jsxs)(s.Z,{sx:{paddingY:2,paddingX:{xs:2,md:3},borderBottom:"1px solid #fff",display:{xs:"flex",md:"grid"},flexDirection:{xs:"column",md:"unset"},gridTemplateColumns:{md:"1.2fr 0.9fr 1fr 0.9fr 0.7fr 0.9fr 0.9fr 1.2fr"},alignItems:"center",gap:{xs:1,md:1},backgroundColor:"#ffffff",borderRadius:1,"&:hover":{backgroundColor:"#fafafa"}},children:[(0,t.jsx)(d.Z,{variant:"body2",fontWeight:600,children:e.name}),(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:null!==(r=e.providerNumber)&&void 0!==r?r:"—"}),(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:null!==(n=e.email)&&void 0!==n?n:"—"}),(0,t.jsx)(d.Z,{variant:"body2",children:C(e.agreedAmount)}),(0,t.jsx)(d.Z,{variant:"body2",children:null!=e.percentageToAdd?"".concat(e.percentageToAdd,"%"):"—"}),(0,t.jsx)(d.Z,{variant:"body2",fontWeight:500,children:C((0,y.WN)(e))}),(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:function(e){if(!e)return"—";try{return new Date(e).toLocaleDateString()}catch(e){return"—"}}(e.agreedAt)}),(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:200},children:null!==(i=e.agreedTerms)&&void 0!==i?i:"—"})]},e.id)})})})]})})}),(0,t.jsxs)(x.Z,{open:n,onClose:Y,PaperProps:{sx:{borderRadius:2}},maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(m.Z,{children:"Register provider"}),(0,t.jsx)(g.Z,{children:(0,t.jsxs)(o.Z,{spacing:2,sx:{pt:1},children:[(0,t.jsx)(h.Z,{label:"Name",required:!0,fullWidth:!0,value:k,onChange:e=>N(e.target.value),placeholder:"Provider or company name"}),(0,t.jsx)(h.Z,{label:"Email",type:"email",fullWidth:!0,value:A,onChange:e=>S(e.target.value),placeholder:"provider@example.com"}),(0,t.jsx)(h.Z,{label:"Agreed amount (NGN)",type:"number",inputProps:{min:0,step:1e3},fullWidth:!0,value:R,onChange:e=>W(e.target.value),placeholder:"e.g. 1000000",helperText:"Capital amount the provider is giving"}),(0,t.jsx)(h.Z,{label:"Agreed percentage (%)",type:"number",inputProps:{min:0,step:.5},fullWidth:!0,value:P,onChange:e=>I(e.target.value),placeholder:"e.g. 5",helperText:"Percentage added on their share of repayments"}),(0,t.jsx)(h.Z,{label:"Agreed date",type:"date",fullWidth:!0,value:T,onChange:e=>D(e.target.value),InputLabelProps:{shrink:!0}}),(0,t.jsx)(h.Z,{label:"Agreed terms / notes",multiline:!0,rows:3,fullWidth:!0,value:E,onChange:e=>L(e.target.value),placeholder:"Optional notes or terms"}),M.isError&&(0,t.jsx)(p.Z,{severity:"error",children:M.error.message})]})}),(0,t.jsxs)(f.Z,{sx:{px:3,pb:2},children:[(0,t.jsx)(c.Z,{onClick:Y,children:"Cancel"}),(0,t.jsx)(c.Z,{variant:"contained",onClick:()=>{let e=k.trim();if(!e)return;let r=R.trim()?parseFloat(R):void 0;if(void 0!==r&&(isNaN(r)||r<0))return;let n=P.trim()?parseFloat(P):void 0;void 0!==n&&(isNaN(n)||n<0)||M.mutate({name:e,email:A.trim()||void 0,agreedAmount:r,percentageToAdd:n,agreedAt:T.trim()||void 0,agreedTerms:E.trim()||void 0},{onSuccess:()=>Y()})},disabled:!k.trim()||M.isPending,sx:{backgroundColor:"#0b7b4c"},children:M.isPending?"Creating...":"Register"})]})]})]})}},8243:function(e,r,n){"use strict";n.d(r,{Z:function(){return l}});var t=n(7437),i=n(9869),a=n(8984),s=n(7404),o=n(3996),d=n(1899);function l(e){let{search:r,onSearchChange:n}=e;return(0,t.jsxs)(a.Z,{direction:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",spacing:2,sx:{marginBottom:3},children:[(0,t.jsx)(s.Z,{placeholder:"Search",value:r,onChange:e=>n(e.target.value),InputProps:{startAdornment:(0,t.jsx)(o.Z,{position:"start",children:(0,t.jsx)(i.Z,{sx:{color:"#97a6a0"}})})},sx:{width:{xs:"100%",sm:320,md:380},alignSelf:{xs:"stretch",md:"flex-start"},"& .MuiOutlinedInput-root":{backgroundColor:"#f3f3f3",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}}),(0,t.jsx)(d.Z,{})]})}}},function(e){e.O(0,[165,43,498,262,404,49,135,713,549,396,94,971,117,744],function(){return e(e.s=5844)}),_N_E=e.O()}]);