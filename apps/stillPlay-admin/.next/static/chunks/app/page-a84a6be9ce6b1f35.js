(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1594:function(e,t,n){Promise.resolve().then(n.bind(n,57340))},57340:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var i=n(57437),r=n(29539),s=n(84523),a=n(8984),l=n(5002),u=n(1899),o=n(97404),c=n(23996),d=n(59832),y=n(82279),f=n(94013),m=n(21770),h=n(27648),x=n(99376),g=n(2265),p=n(22603),v=n(53675),b=n(58094),q=n(9099),k=n(88219);function j(){let e=(0,x.useRouter)(),t="success"===(0,x.useSearchParams)().get("reset"),n=(0,q.t)(e=>e.status),j=(0,q.t)(e=>e.token),K=(0,q.t)(e=>e.setAuthenticated),[Z,F]=(0,g.useState)(""),[w,S]=(0,g.useState)(""),[L,Q]=(0,g.useState)(!1),[O,W]=(0,g.useState)(!1);(0,g.useEffect)(()=>{W(!0)},[]),(0,g.useEffect)(()=>{O&&"authenticated"===n&&j&&e.replace("/dashboard")},[O,n,j,e]);let P=(0,m.D)({mutationFn:()=>(0,v.$g)({email:Z.trim(),password:w}),onSuccess:t=>{var n;K(t.token,null!==(n=t.user)&&void 0!==n?n:null),t.user&&k.LM.getState().setProfile({id:t.user.id,email:t.user.email,role:t.user.role,firstName:t.user.firstName,lastName:t.user.lastName}),(0,b.bA)({action:"Logged in"}),e.replace("/dashboard")}});return(0,i.jsx)(p.Z,{children:(0,i.jsxs)(a.Z,{spacing:3,sx:{width:"100%",alignItems:"stretch"},children:[(0,i.jsx)(l.Z,{variant:"h4",sx:{color:"#4a4a4a",textAlign:"left"},children:"Welcome to StillPlay."}),(0,i.jsx)(u.Z,{component:"form",onSubmit:e=>{e.preventDefault(),P.mutate()},sx:{width:"100%"},children:(0,i.jsxs)(a.Z,{spacing:2,sx:{width:"100%"},children:[(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsx)(l.Z,{variant:"body2",sx:{fontWeight:600},children:"Email address"}),(0,i.jsx)(o.Z,{placeholder:"you@example.com",value:Z,onChange:e=>F(e.target.value),type:"email",required:!0,fullWidth:!0,sx:{"& input":{textAlign:"left"},"& input::placeholder":{textAlign:"left"},"& .MuiOutlinedInput-root":{backgroundColor:"#f2f2f2",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}})]}),(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsx)(l.Z,{variant:"body2",sx:{fontWeight:600},children:"Password"}),(0,i.jsx)(o.Z,{placeholder:"••••••••",value:w,onChange:e=>S(e.target.value),type:L?"text":"password",required:!0,fullWidth:!0,InputProps:{endAdornment:(0,i.jsx)(c.Z,{position:"end",children:(0,i.jsx)(d.Z,{"aria-label":L?"Hide password":"Show password",onClick:()=>Q(e=>!e),edge:"end",size:"small",children:L?(0,i.jsx)(r.Z,{}):(0,i.jsx)(s.Z,{})})})},sx:{"& input":{textAlign:"left"},"& input::placeholder":{textAlign:"left"},"& .MuiOutlinedInput-root":{backgroundColor:"#f2f2f2",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}})]}),(0,i.jsx)(l.Z,{variant:"body2",sx:{textAlign:"right"},children:(0,i.jsx)(h.default,{href:"/forgot-password",style:{color:"inherit",textDecoration:"none"},children:"Forgot Password?"})}),t?(0,i.jsx)(y.Z,{severity:"success",children:"Password reset successfully. You can now log in."}):null,P.isError?(0,i.jsx)(y.Z,{severity:"error",children:P.error.message}):null,(0,i.jsx)(f.Z,{type:"submit",variant:"contained",size:"large",disabled:P.isPending,fullWidth:!0,sx:{backgroundColor:"#0b7b4c"},children:P.isPending?"Logging in…":"Log in"})]})})]})})}function K(){return(0,i.jsx)(g.Suspense,{fallback:(0,i.jsx)(p.Z,{children:(0,i.jsx)(u.Z,{sx:{py:4,textAlign:"center"},children:(0,i.jsx)(l.Z,{color:"text.secondary",children:"Loading…"})})}),children:(0,i.jsx)(j,{})})}},22603:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(57437),r=n(1899),s=n(44236);function a(){return(0,i.jsx)(r.Z,{component:s.E.div,initial:{backgroundPosition:"0% 50%"},animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:7,repeat:1/0,ease:"linear"},sx:{position:"relative",display:{xs:"none",md:"flex"},alignItems:"center",justifyContent:"center",backgroundImage:"linear-gradient(135deg, #f0b12a 0%, #0b7b4c 55%, #f0b12a 100%)",backgroundSize:"200% 200%"},children:(0,i.jsx)(r.Z,{component:s.E.img,src:"/assets/svg/STILL PLAYLOGOWH.svg",alt:"Still Play",initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:"easeOut"},sx:{width:{xs:140,md:180},height:"auto"}})})}function l(e){let{children:t}=e;return(0,i.jsx)(r.Z,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:(0,i.jsxs)(r.Z,{sx:{width:"100%",minHeight:"100vh",background:"#fff",borderRadius:0,overflow:"hidden",display:"grid",gridTemplateColumns:{xs:"1fr",md:"40% 60%"}},children:[(0,i.jsx)(a,{}),(0,i.jsx)(r.Z,{sx:{padding:{xs:3,md:6},display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(r.Z,{component:s.E.div,initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},sx:{width:"100%",maxWidth:680},children:t})})]})})}},58094:function(e,t,n){"use strict";n.d(t,{Cx:function(){return v},HI:function(){return k},Hv:function(){return L},It:function(){return q},OL:function(){return p},P7:function(){return j},RB:function(){return F},Rm:function(){return c},XO:function(){return d},Xl:function(){return Z},Y7:function(){return h},Yn:function(){return Q},bA:function(){return m},cy:function(){return w},ez:function(){return g},hV:function(){return y},ko:function(){return x},l2:function(){return b},pv:function(){return K},ur:function(){return S},yf:function(){return f}});var i=n(11713),r=n(29827),s=n(21770),a=n(9099),l=n(53675);let u={all:["admin"],users:()=>[...u.all,"users"],user:e=>[...u.users(),e],employees:()=>[...u.all,"employees"],activity:()=>[...u.all,"activity"],settings:()=>[...u.all,"settings"],loans:{all:()=>[...u.all,"loans","all"],allRepayments:()=>[...u.all,"loans","repayments","all"],userLoans:e=>[...u.all,"loans","user",e],userRepayments:e=>[...u.all,"loans","repayments","user",e],userWallet:e=>[...u.all,"loans","wallet",e],userEligibility:e=>[...u.all,"loans","eligibility",e]}},o={all:["providers"],list:()=>[...o.all,"list"]};function c(){let e=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.users(),queryFn:()=>(0,l.zO)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function d(e){let t=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:[...u.users(),"detail",e],queryFn:()=>(0,l.eJ)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function y(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>{let{id:n,payload:i}=t;return(0,l.vr)(e,n,i)},onSuccess:()=>{t.invalidateQueries({queryKey:u.users()}),m({action:"User edited"}),t.invalidateQueries({queryKey:u.activity()})}})}function f(e){let t=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:[...u.activity(),null!=e?e:50],queryFn:()=>(0,l.Cy)(t,e),enabled:!!t,staleTime:3e4})}function m(e){let t=a.t.getState().token;t&&(0,l.BX)(t,e).catch(()=>{})}function h(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>(0,l.Er)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:u.users()}),m({action:"User deleted"}),t.invalidateQueries({queryKey:u.activity()})}})}function x(){let e=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:o.list(),queryFn:()=>(0,l.xp)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function g(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>(0,l.Qz)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:o.list()}),m({action:"Provider added"}),t.invalidateQueries({queryKey:u.activity()})}})}function p(){let e=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.employees(),queryFn:()=>(0,l.vG)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function v(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>(0,l.r8)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:u.employees()}),m({action:"Staff/employee created"}),t.invalidateQueries({queryKey:u.activity()})}})}function b(e){let t=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.loans.userLoans(null!=e?e:""),queryFn:()=>(0,l.hJ)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function q(e){let t=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.loans.userRepayments(null!=e?e:""),queryFn:()=>(0,l.Rt)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function k(e){let t=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.loans.userWallet(null!=e?e:""),queryFn:()=>(0,l.p0)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function j(e){let t=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.loans.userEligibility(null!=e?e:""),queryFn:()=>(0,l.Hd)(t,e),enabled:!!t&&!!e,staleTime:15e3})}function K(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>(0,l.G7)(e,t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:u.loans.userLoans(n.userId)}),t.invalidateQueries({queryKey:u.loans.userWallet(n.userId)}),t.invalidateQueries({queryKey:u.loans.userRepayments(n.userId)}),t.invalidateQueries({queryKey:u.loans.userEligibility(n.userId)}),t.invalidateQueries({queryKey:u.loans.all()}),t.invalidateQueries({queryKey:u.loans.allRepayments()})}})}function Z(){let e=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.loans.all(),queryFn:()=>(0,l.cA)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:3e4})}function F(){let e=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.loans.allRepayments(),queryFn:()=>(0,l.Cb)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:3e4})}function w(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>(0,l.xl)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:u.loans.all()}),m({action:"Loan approved"}),t.invalidateQueries({queryKey:u.activity()})}})}function S(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>(0,l.ey)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:u.loans.all()}),m({action:"Loan rejected"}),t.invalidateQueries({queryKey:u.activity()})}})}function L(){let e=(0,a.t)(e=>e.token);return(0,i.a)({queryKey:u.settings(),queryFn:()=>(0,l.hO)(e),enabled:!!e,staleTime:6e4})}function Q(){let e=(0,a.t)(e=>e.token),t=(0,r.NL)();return(0,s.D)({mutationFn:t=>{let{key:n,value:i}=t;return(0,l.WD)(e,n,i)},onSuccess:()=>{t.invalidateQueries({queryKey:u.settings()})}})}}},function(e){e.O(0,[515,330,262,666,140,404,236,713,448,494,675,971,117,744],function(){return e(e.s=1594)}),_N_E=e.O()}]);