(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1594:function(e,t,n){Promise.resolve().then(n.bind(n,7340))},7340:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n(7437),s=n(9539),r=n(4523),a=n(8984),o=n(5002),l=n(1899),d=n(7404),u=n(3996),c=n(9832),h=n(2279),x=n(4013),f=n(1770),g=n(7648),p=n(9376),m=n(2265),b=n(2603),j=n(3675),y=n(8094),Z=n(9099),v=n(8219);function w(){let e=(0,p.useRouter)(),t="success"===(0,p.useSearchParams)().get("reset"),n=(0,Z.t)(e=>e.status),w=(0,Z.t)(e=>e.token),k=(0,Z.t)(e=>e._hasRehydrated),S=(0,Z.t)(e=>e.setPendingOtp),P=(0,Z.t)(e=>e.setAuthenticated),[C,A]=(0,m.useState)(""),[E,I]=(0,m.useState)(""),[O,L]=(0,m.useState)(!1);(0,m.useEffect)(()=>{let e=setTimeout(()=>{Z.t.getState()._hasRehydrated||Z.t.getState().setRehydrated()},150);return()=>clearTimeout(e)},[]),(0,m.useEffect)(()=>{k&&"authenticated"===n&&w&&e.replace("/dashboard")},[k,n,w,e]);let W=(0,f.D)({mutationFn:()=>(0,j.ho)({type:"login",email:C.trim(),password:E}),onSuccess:t=>{if(t.token){var n;P(t.token,null!==(n=t.user)&&void 0!==n?n:null),t.user&&v.LM.getState().setProfile({id:t.user.id,email:t.user.email,role:t.user.role,firstName:t.user.firstName,lastName:t.user.lastName}),(0,y.bA)({action:"Logged in"}),e.replace("/dashboard");return}let i=C.includes("@")?C.split("@")[0]:C;S(C.trim(),Date.now()+6e5,i),e.push("/otp?flow=login")}});return(0,i.jsx)(b.Z,{children:(0,i.jsxs)(a.Z,{spacing:3,sx:{width:"100%",alignItems:"stretch"},children:[(0,i.jsx)(o.Z,{variant:"h4",sx:{color:"#4a4a4a",textAlign:"left"},children:"Welcome to StillPlay."}),(0,i.jsx)(l.Z,{component:"form",onSubmit:e=>{e.preventDefault(),W.mutate()},sx:{width:"100%"},children:(0,i.jsxs)(a.Z,{spacing:2,sx:{width:"100%"},children:[(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsx)(o.Z,{variant:"body2",sx:{fontWeight:600},children:"Email address"}),(0,i.jsx)(d.Z,{placeholder:"you@example.com",value:C,onChange:e=>A(e.target.value),type:"email",required:!0,fullWidth:!0,sx:{"& input":{textAlign:"left"},"& input::placeholder":{textAlign:"left"},"& .MuiOutlinedInput-root":{backgroundColor:"#f2f2f2",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}})]}),(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsx)(o.Z,{variant:"body2",sx:{fontWeight:600},children:"Password"}),(0,i.jsx)(d.Z,{placeholder:"••••••••",value:E,onChange:e=>I(e.target.value),type:O?"text":"password",required:!0,fullWidth:!0,InputProps:{endAdornment:(0,i.jsx)(u.Z,{position:"end",children:(0,i.jsx)(c.Z,{"aria-label":O?"Hide password":"Show password",onClick:()=>L(e=>!e),edge:"end",size:"small",children:O?(0,i.jsx)(s.Z,{}):(0,i.jsx)(r.Z,{})})})},sx:{"& input":{textAlign:"left"},"& input::placeholder":{textAlign:"left"},"& .MuiOutlinedInput-root":{backgroundColor:"#f2f2f2",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}})]}),(0,i.jsx)(o.Z,{variant:"body2",sx:{textAlign:"right"},children:(0,i.jsx)(g.default,{href:"/forgot-password",style:{color:"inherit",textDecoration:"none"},children:"Forgot Password?"})}),t?(0,i.jsx)(h.Z,{severity:"success",children:"Password reset successfully. You can now log in."}):null,W.isError?(0,i.jsx)(h.Z,{severity:"error",children:W.error.message}):null,(0,i.jsx)(x.Z,{type:"submit",variant:"contained",size:"large",disabled:W.isPending,fullWidth:!0,sx:{backgroundColor:"#0b7b4c"},children:W.isPending?"Sending code...":"Log in"})]})})]})})}function k(){return(0,i.jsx)(m.Suspense,{fallback:(0,i.jsx)(b.Z,{children:(0,i.jsx)(l.Z,{sx:{py:4,textAlign:"center"},children:(0,i.jsx)(o.Z,{color:"text.secondary",children:"Loading..."})})}),children:(0,i.jsx)(w,{})})}},2603:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(7437),s=n(1899),r=n(4236);function a(){return(0,i.jsx)(s.Z,{component:r.E.div,initial:{backgroundPosition:"0% 50%"},animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:7,repeat:1/0,ease:"linear"},sx:{position:"relative",display:{xs:"none",md:"flex"},alignItems:"center",justifyContent:"center",backgroundImage:"linear-gradient(135deg, #f0b12a 0%, #0b7b4c 55%, #f0b12a 100%)",backgroundSize:"200% 200%"},children:(0,i.jsx)(s.Z,{component:r.E.img,src:"/assets/svg/STILL PLAYLOGOWH.svg",alt:"Still Play",initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:"easeOut"},sx:{width:{xs:140,md:180},height:"auto"}})})}function o(e){let{children:t}=e;return(0,i.jsx)(s.Z,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:(0,i.jsxs)(s.Z,{sx:{width:"100%",minHeight:"100vh",background:"#fff",borderRadius:0,overflow:"hidden",display:"grid",gridTemplateColumns:{xs:"1fr",md:"40% 60%"}},children:[(0,i.jsx)(a,{}),(0,i.jsx)(s.Z,{sx:{padding:{xs:3,md:6},display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(s.Z,{component:r.E.div,initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},sx:{width:"100%",maxWidth:680},children:t})})]})})}}},function(e){e.O(0,[165,43,498,262,404,49,135,713,448,494,94,971,117,744],function(){return e(e.s=1594)}),_N_E=e.O()}]);