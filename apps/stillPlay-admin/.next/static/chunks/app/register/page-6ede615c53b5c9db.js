(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{1920:function(e,t,r){Promise.resolve().then(r.bind(r,2833))},2833:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var a=r(7437),n=r(9539),s=r(4523),i=r(8984),o=r(5002),l=r(1899),c=r(7404),u=r(3996),d=r(9832),f=r(2279),h=r(4013),g=r(1770),m=r(7648),p=r(9376),y=r(2265),x=r(2603),w=r(3675),v=r(9099);function A(){let e=(0,p.useRouter)(),t=(0,v.t)(e=>e.setPendingOtp),[r,A]=(0,y.useState)(""),[S,E]=(0,y.useState)(""),[b,Z]=(0,y.useState)(""),[k,P]=(0,y.useState)(""),[L,I]=(0,y.useState)(""),[O,N]=(0,y.useState)(!1),C=(0,g.D)({mutationFn:()=>(0,w.ho)({type:"register",email:b.trim(),password:k,firstName:r.trim(),lastName:S.trim(),nin:L.trim()}),onSuccess:()=>{let a=[r.trim(),S.trim()].filter(Boolean).join(" ")||b.split("@")[0];t(b.trim(),Date.now()+6e5,a),e.push("/otp?flow=register")}});return(0,a.jsx)(x.Z,{children:(0,a.jsxs)(i.Z,{spacing:3,sx:{width:"100%",alignItems:"center"},children:[(0,a.jsx)(o.Z,{variant:"h4",sx:{color:"#4a4a4a"},children:"Create New Account"}),(0,a.jsx)(l.Z,{component:"form",onSubmit:e=>{e.preventDefault(),C.mutate()},sx:{width:"100%"},children:(0,a.jsxs)(i.Z,{spacing:2,sx:{width:"100%"},children:[(0,a.jsxs)(i.Z,{spacing:1,children:[(0,a.jsx)(o.Z,{variant:"body2",sx:{fontWeight:600},children:"First name"}),(0,a.jsx)(c.Z,{placeholder:"John",value:r,onChange:e=>A(e.target.value),required:!0,fullWidth:!0,sx:j})]}),(0,a.jsxs)(i.Z,{spacing:1,children:[(0,a.jsx)(o.Z,{variant:"body2",sx:{fontWeight:600},children:"Last name"}),(0,a.jsx)(c.Z,{placeholder:"Doe",value:S,onChange:e=>E(e.target.value),required:!0,fullWidth:!0,sx:j})]}),(0,a.jsxs)(i.Z,{spacing:1,children:[(0,a.jsx)(o.Z,{variant:"body2",sx:{fontWeight:600},children:"Email address"}),(0,a.jsx)(c.Z,{placeholder:"you@example.com",value:b,onChange:e=>Z(e.target.value),type:"email",required:!0,fullWidth:!0,sx:j})]}),(0,a.jsxs)(i.Z,{spacing:1,children:[(0,a.jsx)(o.Z,{variant:"body2",sx:{fontWeight:600},children:"NIN"}),(0,a.jsx)(c.Z,{placeholder:"National ID",value:L,onChange:e=>I(e.target.value),required:!0,fullWidth:!0,sx:j})]}),(0,a.jsxs)(i.Z,{spacing:1,children:[(0,a.jsx)(o.Z,{variant:"body2",sx:{fontWeight:600},children:"Password"}),(0,a.jsx)(c.Z,{placeholder:"••••••••",value:k,onChange:e=>P(e.target.value),type:O?"text":"password",required:!0,fullWidth:!0,InputProps:{endAdornment:(0,a.jsx)(u.Z,{position:"end",children:(0,a.jsx)(d.Z,{"aria-label":O?"Hide password":"Show password",onClick:()=>N(e=>!e),edge:"end",size:"small",children:O?(0,a.jsx)(n.Z,{}):(0,a.jsx)(s.Z,{})})})},sx:j})]}),C.isError?(0,a.jsx)(f.Z,{severity:"error",children:C.error.message}):null,(0,a.jsx)(h.Z,{type:"submit",variant:"contained",size:"large",disabled:C.isPending,sx:{backgroundColor:"#0b7b4c"},children:C.isPending?"Sending code...":"Sign up"})]})}),(0,a.jsxs)(o.Z,{variant:"body2",sx:{textAlign:"center"},children:["Already have an account? ",(0,a.jsx)(m.default,{href:"/",children:"Log in"})]})]})})}let j={"& input":{textAlign:"left"},"& input::placeholder":{textAlign:"left"},"& .MuiOutlinedInput-root":{backgroundColor:"#f2f2f2",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}},2603:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7437),n=r(1899),s=r(4236);function i(){return(0,a.jsx)(n.Z,{component:s.E.div,initial:{backgroundPosition:"0% 50%"},animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:7,repeat:1/0,ease:"linear"},sx:{position:"relative",display:{xs:"none",md:"flex"},alignItems:"center",justifyContent:"center",backgroundImage:"linear-gradient(135deg, #f0b12a 0%, #0b7b4c 55%, #f0b12a 100%)",backgroundSize:"200% 200%"},children:(0,a.jsx)(n.Z,{component:s.E.img,src:"/assets/svg/STILL PLAYLOGOWH.svg",alt:"Still Play",initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:"easeOut"},sx:{width:{xs:140,md:180},height:"auto"}})})}function o(e){let{children:t}=e;return(0,a.jsx)(n.Z,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:(0,a.jsxs)(n.Z,{sx:{width:"100%",minHeight:"100vh",background:"#fff",borderRadius:0,overflow:"hidden",display:"grid",gridTemplateColumns:{xs:"1fr",md:"40% 60%"}},children:[(0,a.jsx)(i,{}),(0,a.jsx)(n.Z,{sx:{padding:{xs:3,md:6},display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(n.Z,{component:s.E.div,initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},sx:{width:"100%",maxWidth:680},children:t})})]})})}},3675:function(e,t,r){"use strict";function a(){return"http://localhost:3000/api".replace(/\/$/,"")}function n(){if(!a())throw Error("API URL not configured. Add NEXT_PUBLIC_API_BASE_URL to .env.local (e.g. http://localhost:3000/api) and restart the dev server.")}r.d(t,{jY:function(){return E},zN:function(){return O},r8:function(){return W},Qz:function(){return J},Er:function(){return A},WN:function(){return b},o3:function(){return L},Cy:function(){return S},zO:function(){return F},vG:function(){return T},xp:function(){return R},BX:function(){return j},ho:function(){return Z},f8:function(){return P},c0:function(){return C},C_:function(){return I},vr:function(){return v},Ix:function(){return N},VP:function(){return _}});let s=()=>"".concat(a(),"/auth/request-code"),i=()=>"".concat(a(),"/auth/verify-code"),o=()=>"".concat(a(),"/auth/forgot-password"),l=()=>"".concat(a(),"/auth/reset-password"),c=()=>"".concat(a(),"/admin/users"),u=e=>"".concat(a(),"/admin/users/").concat(e),d=()=>"".concat(a(),"/admin/employees"),f=()=>"".concat(a(),"/admin/activity"),h=()=>"".concat(a(),"/providers"),g=()=>"".concat(a(),"/providers"),m=()=>"".concat(a(),"/files/upload");var p=r(9099),y=r(8219);function x(e){let t={"Content-Type":"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t}function w(e){401===e.status&&(p.t.getState().reset(),y.LM.getState().reset())}async function v(e,t,r){let a=await fetch(u(t),{method:"PATCH",headers:x(e),body:JSON.stringify(r)}),n=await a.json().catch(()=>({}));if(!a.ok)throw w(a),Error("string"==typeof n.message?n.message:Array.isArray(n.message)?n.message[0]:"Failed to update user");return n}async function A(e,t){let r=await fetch(u(t),{method:"DELETE",headers:x(e)}),a=await r.json().catch(()=>({}));if(!r.ok)throw w(r),Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Failed to delete user");return a}async function j(e,t){let r=await fetch(f(),{method:"POST",headers:x(e),body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw w(r),Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Failed to record activity");return a}async function S(e,t){let r=new URL(f());null!=t&&r.searchParams.set("limit",String(t));let a=await fetch(r.toString(),{headers:x(e)}),n=await a.json().catch(()=>({}));if(!a.ok)throw w(a),Error("string"==typeof n.message?n.message:"Failed to load activity");return n}let E=["Super Admin","Finance","Customer Support","Operations","Legal & Compliance","Auditor"];function b(e){var t,r;let a=null!==(t=e.agreedAmount)&&void 0!==t?t:null;return null==a||a<=0?null:Math.round(a*(1+(null!==(r=e.percentageToAdd)&&void 0!==r?r:0)/100)*100)/100}async function Z(e){let t=await fetch(s(),{method:"POST",headers:x(),body:JSON.stringify(e)}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to send code");return r}let k="stillplay_reset_token";async function P(e){n();let t=await fetch(o(),{method:"POST",headers:x(),body:JSON.stringify({email:e.trim()})}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to send reset code");return r}function L(){return sessionStorage.getItem(k)}function I(e){sessionStorage.setItem(k,e)}function O(){sessionStorage.removeItem(k)}async function N(e,t){n();let r=new FormData;r.append("file",e),(null==t?void 0:t.folder)&&r.append("folder",t.folder);let a={};(null==t?void 0:t.token)&&(a.Authorization="Bearer ".concat(t.token));let s=await fetch(m(),{method:"POST",headers:a,body:r}),i=await s.json().catch(()=>({}));if(!s.ok){var o;throw Error("string"==typeof i.message?i.message:null!==(o=i.error)&&void 0!==o?o:"Upload failed")}if(i&&"object"==typeof i&&"error"in i)throw Error(i.error);return i}async function C(e){n();let t=await fetch(l(),{method:"POST",headers:x(),body:JSON.stringify(e)}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to reset password");return r}async function _(e){n();let t=await fetch(i(),{method:"POST",headers:x(),body:JSON.stringify(e)}),r=await t.text(),a={};try{a=r?JSON.parse(r):{}}catch(e){if(r.trimStart().startsWith("<!"))throw Error("Received a web page instead of API. Set NEXT_PUBLIC_API_BASE_URL in .env.local to your API gateway (e.g. http://localhost:3000/api) and restart.");throw Error(r.slice(0,120)||"Invalid or expired code")}if(!t.ok)throw Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Invalid or expired code");return a}async function F(e){var t;let r=await fetch(c(),{headers:x(e)}),a=await r.json().catch(()=>({}));if(!r.ok)throw w(r),Error("string"==typeof a.message?a.message:"Failed to load users");return Array.isArray(a)?a:null!==(t=a.users)&&void 0!==t?t:[]}async function T(e){var t;let r=await fetch(d(),{headers:x(e)}),a=await r.json().catch(()=>({}));if(!r.ok)throw w(r),Error("string"==typeof a.message?a.message:"Failed to load staff");return Array.isArray(a)?a:null!==(t=a.employees)&&void 0!==t?t:[]}async function W(e,t){let r=await fetch(d(),{method:"POST",headers:x(e),body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw w(r),Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Failed to create staff");return a}async function R(e){var t;let r=await fetch(h(),{headers:x(e)}),a=await r.json().catch(()=>({}));if(!r.ok)throw w(r),Error("string"==typeof a.message?a.message:"Failed to load providers");return Array.isArray(a)?a:null!==(t=a.providers)&&void 0!==t?t:[]}async function J(e,t){let r=await fetch(g(),{method:"POST",headers:x(e),body:JSON.stringify(t)}),a=await r.json().catch(()=>({}));if(!r.ok)throw w(r),Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Failed to create provider");return a}},9099:function(e,t,r){"use strict";r.d(t,{t:function(){return o}});var a=r(9625),n=r(6885),s=r(8219);let i={status:"unauthenticated",token:null,user:null,otpEmail:null,otpExpiresAt:null,fullName:null,_hasRehydrated:!1,lastLoginAt:null,lastLoginIp:null,lastAction:null},o=(0,a.Ue)()((0,n.tJ)(e=>({...i,setPendingOtp:(t,r,a)=>e({status:"otp_required",otpEmail:t,otpExpiresAt:r,fullName:null!=a?a:null}),setAuthenticated:(t,r)=>e({status:"authenticated",token:t,user:r,otpEmail:null,otpExpiresAt:null,lastLoginAt:Date.now()}),setUser:t=>e({user:t}),setRehydrated:()=>e({_hasRehydrated:!0}),setLastAction:t=>e({lastAction:t}),setLastLoginIp:t=>e({lastLoginIp:t}),reset:()=>e(i)}),{name:"stillplay-admin-auth",storage:(0,n.FL)(()=>localStorage),partialize:e=>({status:e.status,token:e.token,user:e.user,fullName:e.fullName,otpEmail:e.otpEmail,otpExpiresAt:e.otpExpiresAt,lastLoginAt:e.lastLoginAt,lastLoginIp:e.lastLoginIp,lastAction:e.lastAction}),onRehydrateStorage:()=>()=>{let e=o.getState();e.setRehydrated(),e.user&&s.LM.getState().setProfile(e.user)}}))},8219:function(e,t,r){"use strict";r.d(t,{LM:function(){return s}});var a=r(9625),n=r(6885);let s=(0,a.Ue)()((0,n.tJ)(e=>({profile:null,setProfile:t=>e({profile:t}),reset:()=>e({profile:null})}),{name:"stillplay-admin-user",storage:(0,n.FL)(()=>localStorage),partialize:e=>({profile:e.profile})}))}},function(e){e.O(0,[165,43,498,262,404,49,135,448,494,971,117,744],function(){return e(e.s=1920)}),_N_E=e.O()}]);