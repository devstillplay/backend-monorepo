(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5328:(e,s,i)=>{"use strict";i.r(s),i.d(s,{GlobalError:()=>t.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),i(9521),i(3321),i(4752),i(5866);var a=i(3191),r=i(8716),n=i(7922),t=i.n(n),l=i(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(s,o);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,9521)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,3321)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,4752)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/page.tsx"],u="/dashboard/page",x={require:i,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},777:(e,s,i)=>{Promise.resolve().then(i.bind(i,9530))},9530:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>W});var a=i(326),r=i(7387),n=i(9069),t=i(45),l=i(1728),o=i(8464),d=i(274),c=i(8260),u=i(8240),x=i(5112),p=i(8139),m=i(2265),h=i(3198),f=i(7345),g=i(9074),j=i(541),Z=i(9995),b=i(8117),v=i(8591),y=i(6277),C=i(7577),k=i(5047),P=i(2241),S=i(2894),w=i(7114),z=i(9892),M=i(5863),I=i(5325),N=i(1525);function _({isVisible:e,suspended:s,onChatClick:i,onEditClick:r,onDeleteClick:n,onSuspendClick:t}){return(0,a.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",sx:{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 0.2s ease"},children:[a.jsx(c.Z,{size:"small",onClick:i,"aria-label":"Open chat",children:a.jsx(z.Z,{fontSize:"small"})}),a.jsx(c.Z,{size:"small",onClick:r,"aria-label":"Edit user",children:a.jsx(I.Z,{fontSize:"small"})}),t&&a.jsx(m.Z,{size:"small",variant:"outlined",color:s?"success":"warning",startIcon:s?a.jsx(N.Z,{}):a.jsx(w.Z,{}),onClick:t,sx:{minWidth:0,px:1},children:s?"Unsuspend":"Suspend"}),a.jsx(c.Z,{size:"small",onClick:n,"aria-label":"Delete user",children:a.jsx(M.Z,{fontSize:"small"})})]})}var D=i(2972),R=i(5653),U=i(5031);function T(e){let s=[e.firstName,e.lastName].filter(Boolean).join(" ")||e.email||"â€”";return{id:e.id,name:s,code:e.userNumber??e.id,behaviour:"Good",suspended:e.suspended??!1,picture:e.picture??null}}function W(){(0,k.useRouter)();let e=(0,R.t)(e=>e.token),[s,i]=(0,C.useState)(""),[w,z]=(0,C.useState)("all"),[M,I]=(0,C.useState)(0),[N,W]=(0,C.useState)(1),[E,H]=(0,C.useState)(!1),[L,O]=(0,C.useState)(null),[B,V]=(0,C.useState)(!1),[A,q]=(0,C.useState)([]),[G,J]=(0,C.useState)(""),[Y,X]=(0,C.useState)(null),[$,F]=(0,C.useState)(null),[K,Q]=(0,C.useState)({firstName:"",lastName:"",picture:""}),[ee,es]=(0,C.useState)(!1),[ei,ea]=(0,C.useState)(0),{data:er=[],isLoading:en,isError:et,error:el,refetch:eo,isFetching:ed}=(0,D.Rm)(),ec=(0,D.hV)(),eu=(0,D.Y7)(),ex=(0,C.useMemo)(()=>er.map(T),[er]),ep=(0,C.useMemo)(()=>{let e=ex;if("suspended"===w&&(e=e.filter(e=>e.suspended)),s.trim()){let i=s.trim().toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(i)||e.code.toLowerCase().includes(i))}return e},[ex,s,w]),em=Math.max(1,Math.ceil(ep.length/10)),eh=(N-1)*10,ef=ep.slice(eh,eh+10);return(0,a.jsxs)(l.Z,{component:P.E.div,initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},children:[a.jsx(S.Z,{search:s,onSearchChange:i}),a.jsx(l.Z,{sx:{background:"#ffffff",borderRadius:{xs:0,md:2},padding:{xs:2,md:3.5},paddingBottom:{xs:3,md:4},marginTop:{xs:2,md:3},marginX:{xs:-2,md:0},minHeight:"calc(100vh - 220px)",display:"flex",flexDirection:"column"},children:a.jsx(o.Z,{sx:{marginTop:"auto"},spacing:2,children:(0,a.jsxs)(l.Z,{sx:{borderRadius:3,padding:2,backgroundColor:"#f3f3f3",display:"flex",flexDirection:"column"},children:[(0,a.jsxs)(o.Z,{spacing:2,sx:{marginBottom:2,paddingTop:2,paddingLeft:2},children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:1,children:[a.jsx(d.Z,{variant:"h6",sx:{fontWeight:700,marginTop:{xs:1,md:2}},children:"USERS"}),a.jsx(c.Z,{size:"small",onClick:()=>eo(),disabled:ed,"aria-label":"Refresh list",children:a.jsx(n.Z,{})})]}),(0,a.jsxs)(u.Z,{value:w,onChange:(e,s)=>{z(s),W(1)},sx:{minHeight:36,"& .MuiTab-root":{minHeight:36,textTransform:"none",fontWeight:600},"& .MuiTabs-indicator":{backgroundColor:"#0b7b4c"},"& .Mui-selected":{color:"#0b7b4c"}},children:[a.jsx(x.Z,{label:"All profiles",value:"all"}),a.jsx(x.Z,{label:"Suspended",value:"suspended"})]})]}),(0,a.jsxs)(l.Z,{sx:{fontSize:12,color:"text.secondary",marginBottom:2,backgroundColor:"#fff",borderRadius:999,paddingY:1.2,paddingX:3,display:{xs:"none",md:"grid"},gridTemplateColumns:{md:"2fr 1fr 1fr 0.9fr 80px"},alignItems:"center",gap:1},children:[a.jsx(l.Z,{children:"Name"}),a.jsx(l.Z,{children:"Offline code"}),a.jsx(l.Z,{children:"Behaviour"}),a.jsx(l.Z,{children:"Status"}),a.jsx(l.Z,{})]}),a.jsx(l.Z,{sx:{marginTop:1,maxHeight:{xs:420,sm:"none"},overflowY:{xs:"auto",sm:"visible"}},children:en?(0,a.jsxs)(o.Z,{alignItems:"center",py:4,children:[a.jsx(p.Z,{sx:{color:"#0b7b4c"}}),a.jsx(d.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Loading users..."})]}):et?(0,a.jsxs)(o.Z,{alignItems:"center",py:4,spacing:2,children:[a.jsx(d.Z,{color:"error",children:el.message}),a.jsx(m.Z,{variant:"outlined",onClick:()=>eo(),size:"small",children:"Retry"})]}):a.jsx(o.Z,{spacing:0,children:ef.map((e,s)=>{let i=eh+s;return(0,a.jsxs)(l.Z,{onClick:()=>I(i),sx:{paddingY:2,paddingX:{xs:2,md:3},borderBottom:s===ef.length-1?"none":"1px solid #fff",backgroundColor:M===i?"#ffffff":"transparent",display:{xs:"flex",md:"grid"},flexDirection:{xs:"column",md:"unset"},gridTemplateColumns:{md:"2fr 1fr 1fr 0.9fr 80px"},alignItems:"center",gap:{xs:1.5,md:1},cursor:"pointer",transition:"background-color 0.2s ease",borderRadius:1,outline:M===i?"1px solid #32b25c":"1px solid transparent",outlineOffset:"-1px","&:hover":{backgroundColor:"#ffffff",outline:"1px solid #32b25c"}},children:[(0,a.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[a.jsx(h.Z,{src:e.picture||void 0,sx:{width:32,height:32},children:(e.name?.[0]??"?").toUpperCase()}),a.jsx(d.Z,{variant:"body2",children:e.name})]}),(0,a.jsxs)(l.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx(d.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Offline code"}),a.jsx(d.Z,{variant:"body2",children:e.code})]}),(0,a.jsxs)(l.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx(d.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Behaviour"}),M===i?a.jsx(l.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:a.jsx(_,{isVisible:!0,suspended:e.suspended,onChatClick:()=>{O({id:e.id,name:e.name,code:e.code}),H(!0)},onEditClick:()=>{let s=er.find(s=>s.id===e.id);s&&(F(s),Q({firstName:s.firstName??"",lastName:s.lastName??"",picture:s.picture??""}))},onDeleteClick:()=>{X({id:e.id,name:e.name,code:e.code})},onSuspendClick:()=>{ec.mutate({id:e.id,payload:{suspended:!e.suspended}})}})}):a.jsx(d.Z,{variant:"body2",children:e.behaviour})]}),a.jsx(l.Z,{sx:{display:{xs:"none",md:"flex"},alignItems:"center"},children:a.jsx(d.Z,{variant:"body2",sx:{color:e.suspended?"error.main":"#0b7b4c",fontWeight:500},children:e.suspended?"Suspended":"Active"})}),a.jsx(l.Z,{sx:{display:{xs:"none",md:"block"}}})]},`${e.id}`)})})}),a.jsx(o.Z,{alignItems:"center",sx:{marginTop:2},children:a.jsx(f.Z,{count:em,page:N,onChange:(e,s)=>{W(s),I((s-1)*10)},color:"primary"})})]})})}),a.jsx(g.ZP,{anchor:"right",open:E,onClose:()=>{H(!1),J("")},PaperProps:{sx:{width:{xs:"100%",sm:360},padding:3}},children:(0,a.jsxs)(o.Z,{spacing:3,sx:{height:"100%"},children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,a.jsxs)(o.Z,{spacing:.5,children:[a.jsx(d.Z,{variant:"h6",fontWeight:700,children:L?L.name:"User chat"}),(0,a.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["User ID: ",L?.id??"--"]})]}),a.jsx(c.Z,{"aria-label":"Close chat",onClick:()=>{H(!1),J("")},children:a.jsx(r.Z,{})})]}),a.jsx(l.Z,{sx:{flex:1,backgroundColor:"#f3f3f3",borderRadius:1,padding:2,overflowY:"auto"},children:a.jsx(o.Z,{spacing:2,children:B?a.jsx(d.Z,{color:"text.secondary",children:"Loading chat..."}):A.map(e=>(0,a.jsxs)(l.Z,{sx:{alignSelf:"admin"===e.sender?"flex-end":"flex-start",backgroundColor:"admin"===e.sender?"#0b7b4c":"#ffffff",color:"admin"===e.sender?"#ffffff":"text.primary",padding:1.5,borderRadius:1,maxWidth:"80%"},children:[a.jsx(d.Z,{variant:"body2",children:e.text}),a.jsx(d.Z,{variant:"caption",sx:{opacity:.7},children:e.time})]},e.id))})}),(0,a.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[a.jsx(j.Z,{fullWidth:!0,placeholder:"Type a message...",value:G,onChange:e=>J(e.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5,backgroundColor:"#fff"}}}),a.jsx(c.Z,{color:"primary",onClick:()=>{if(!G.trim())return;let e=new Date,s=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;q(e=>[...e,{id:e.length+1,sender:"admin",text:G.trim(),time:s}]),J("")},sx:{backgroundColor:"#0b7b4c",color:"#fff","&:hover":{backgroundColor:"#096b3d"}},children:a.jsx(t.Z,{})})]})]})}),(0,a.jsxs)(Z.Z,{open:!!Y,onClose:()=>!eu.isPending&&X(null),PaperProps:{sx:{borderRadius:2}},children:[a.jsx(b.Z,{children:"Delete user"}),(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)(d.Z,{children:["Are you sure you want to delete"," ",a.jsx("strong",{children:Y?.name??""}),"? Their wallet and loan history will also be deleted. This action cannot be undone."]}),eu.isError&&a.jsx(d.Z,{color:"error",sx:{mt:2},children:eu.error.message})]}),(0,a.jsxs)(y.Z,{sx:{px:3,pb:2},children:[a.jsx(m.Z,{onClick:()=>X(null),disabled:eu.isPending,children:"Cancel"}),a.jsx(m.Z,{variant:"contained",color:"error",disabled:eu.isPending,onClick:()=>{Y&&eu.mutate(Y.id,{onSuccess:()=>{X(null),I(-1)}})},children:eu.isPending?"Deleting...":"Delete"})]})]}),(0,a.jsxs)(Z.Z,{open:!!$,onClose:()=>!ec.isPending&&F(null),PaperProps:{sx:{borderRadius:2,minWidth:360}},maxWidth:"sm",fullWidth:!0,children:[a.jsx(b.Z,{children:"Edit user"}),a.jsx(v.Z,{children:(0,a.jsxs)(o.Z,{spacing:2,sx:{pt:1},children:[(0,a.jsxs)(o.Z,{alignItems:"center",spacing:1,children:[a.jsx(h.Z,{src:K.picture||void 0,sx:{width:80,height:80},children:(K.firstName?.[0]||K.lastName?.[0]||$?.email?.[0]||"?").toUpperCase()}),a.jsx(d.Z,{variant:"caption",color:"text.secondary",children:$?.email}),a.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"edit-user-image-upload",onChange:async s=>{let i=s.target.files?.[0];if(i&&$){es(!0);try{let s=await (0,U.Ix)(i,{folder:"stillplay/avatars",token:e});Q(e=>({...e,picture:s.secureUrl})),ec.mutate({id:$.id,payload:{picture:s.secureUrl}},{onSuccess:()=>{F(e=>e?{...e,picture:s.secureUrl}:null)}})}catch(e){console.error(e)}finally{es(!1),ea(e=>e+1)}}}},ei),a.jsx(m.Z,{size:"small",variant:"outlined",component:"label",htmlFor:"edit-user-image-upload",disabled:ee||ec.isPending,sx:{mt:.5},children:ee?"Uploading...":ec.isPending?"Saving...":"Upload image"})]}),a.jsx(j.Z,{label:"First name",value:K.firstName,onChange:e=>Q(s=>({...s,firstName:e.target.value})),fullWidth:!0,size:"small"}),a.jsx(j.Z,{label:"Last name",value:K.lastName,onChange:e=>Q(s=>({...s,lastName:e.target.value})),fullWidth:!0,size:"small"}),ec.isError&&a.jsx(d.Z,{color:"error",variant:"body2",children:ec.error.message})]})}),(0,a.jsxs)(y.Z,{sx:{px:3,pb:2},children:[a.jsx(m.Z,{onClick:()=>F(null),disabled:ec.isPending,children:"Cancel"}),a.jsx(m.Z,{variant:"contained",disabled:ec.isPending,onClick:()=>{$&&ec.mutate({id:$.id,payload:{firstName:K.firstName.trim()||void 0,lastName:K.lastName.trim()||void 0,picture:K.picture.trim()||void 0}},{onSuccess:()=>F(null)})},sx:{backgroundColor:"#0b7b4c"},children:ec.isPending?"Saving...":"Save"})]})]})]})}},2894:(e,s,i)=>{"use strict";i.d(s,{Z:()=>d});var a=i(326),r=i(5420),n=i(8464),t=i(541),l=i(7329),o=i(1728);function d({search:e,onSearchChange:s}){return(0,a.jsxs)(n.Z,{direction:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",spacing:2,sx:{marginBottom:3},children:[a.jsx(t.Z,{placeholder:"Search",value:e,onChange:e=>s(e.target.value),InputProps:{startAdornment:a.jsx(l.Z,{position:"start",children:a.jsx(r.Z,{sx:{color:"#97a6a0"}})})},sx:{width:{xs:"100%",sm:320,md:380},alignSelf:{xs:"stretch",md:"flex-start"},"& .MuiOutlinedInput-root":{backgroundColor:"#f3f3f3",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}}),a.jsx(o.Z,{})]})}},7114:(e,s,i)=>{"use strict";var a=i(9618);s.Z=void 0;var r=a(i(1133)),n=i(326);s.Z=(0,r.default)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block")},9892:(e,s,i)=>{"use strict";var a=i(9618);s.Z=void 0;var r=a(i(1133)),n=i(326);s.Z=(0,r.default)((0,n.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline")},7387:(e,s,i)=>{"use strict";var a=i(9618);s.Z=void 0;var r=a(i(1133)),n=i(326);s.Z=(0,r.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},5863:(e,s,i)=>{"use strict";var a=i(9618);s.Z=void 0;var r=a(i(1133)),n=i(326);s.Z=(0,r.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},5325:(e,s,i)=>{"use strict";var a=i(9618);s.Z=void 0;var r=a(i(1133)),n=i(326);s.Z=(0,r.default)((0,n.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined")},1525:(e,s,i)=>{"use strict";var a=i(9618);s.Z=void 0;var r=a(i(1133)),n=i(326);s.Z=(0,r.default)((0,n.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen")},45:(e,s,i)=>{"use strict";var a=i(9618);s.Z=void 0;var r=a(i(1133)),n=i(326);s.Z=(0,r.default)((0,n.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},9521:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>a});let a=(0,i(8570).createProxy)(String.raw`/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var i=e=>s(s.s=e),a=s.X(0,[339,164,344,541,108,951,804,800,306,215,33],()=>i(5328));module.exports=a})();