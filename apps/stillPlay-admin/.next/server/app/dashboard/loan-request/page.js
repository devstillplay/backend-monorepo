(()=>{var e={};e.id=15,e.ids=[15],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},89258:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(99283),r(86400),r(84752),r(35866);var t=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let d=["",{children:["dashboard",{children:["loan-request",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,99283)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/loan-request/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,86400)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,84752)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/loan-request/page.tsx"],x="/dashboard/loan-request/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/loan-request/page",pathname:"/dashboard/loan-request",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},52540:(e,s,r)=>{Promise.resolve().then(r.bind(r,60244))},60244:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var t=r(10326),a=r(55692),i=r(99069),n=r(71728),o=r(88464),l=r(30274),d=r(48260),c=r(98139),x=r(42265),m=r(33198),u=r(7345),p=r(17577),h=r(72894),g=r(92972);function f(){let[e,s]=(0,p.useState)(""),[r,f]=(0,p.useState)(1),[b,j]=(0,p.useState)("all"),{data:Z,isLoading:y,isError:v,error:C,refetch:P,isFetching:w}=(0,g.Xl)(),{data:k=[]}=(0,g.Rm)(),I=(0,g.cy)(),R=(0,g.ur)(),S=Z?.loans??[],_=(0,p.useMemo)(()=>{let e=new Map;return k.forEach(s=>{let r=[s.firstName,s.lastName].filter(Boolean).join(" ")||s.email||"—";e.set(s.id,{name:r,code:s.userNumber??s.id.slice(-6),picture:s.picture??null})}),e},[k]),E=(0,p.useMemo)(()=>{let s=S;if("all"!==b&&(s=s.filter(e=>e.status===b)),e.trim()){let r=e.trim().toLowerCase();s=s.filter(e=>{let s=_.get(e.userId);return s?.name.toLowerCase().includes(r)||s?.code.toLowerCase().includes(r)||e.amount.toString().includes(r)||e.id.toLowerCase().includes(r)})}return s},[S,b,e,_]),A=Math.max(1,Math.ceil(E.length/10)),D=(r-1)*10,q=E.slice(D,D+10);return(0,t.jsxs)(n.Z,{children:[t.jsx(h.Z,{search:e,onSearchChange:s}),t.jsx(n.Z,{sx:{background:"#ffffff",borderRadius:{xs:0,md:4},padding:{xs:2,md:3.5},paddingBottom:{xs:3,md:4},marginTop:{xs:2,md:3},marginX:{xs:-2,md:0},minHeight:"calc(100vh - 220px)",display:"flex",flexDirection:"column"},children:t.jsx(o.Z,{sx:{marginTop:"auto"},spacing:2,children:(0,t.jsxs)(n.Z,{sx:{borderRadius:3,padding:2,backgroundColor:"#f3f3f3",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(o.Z,{spacing:2,sx:{marginBottom:2,paddingTop:2,paddingLeft:{xs:1,md:2}},children:[(0,t.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,flexWrap:"wrap",children:[t.jsx(l.Z,{variant:"h6",sx:{fontWeight:700,fontSize:{xs:"1rem",md:"1.25rem"}},children:"LOAN REQUEST"}),t.jsx(d.Z,{size:"small",onClick:()=>P(),disabled:w,"aria-label":"Refresh",children:t.jsx(i.Z,{fontSize:"small"})})]}),t.jsx(o.Z,{direction:"row",spacing:{xs:1,md:4},alignItems:"center",flexWrap:"wrap",sx:{gap:{xs:.5,md:0}},children:["all","PENDING","APPROVED","REJECTED","DISBURSED","REPAID"].map(e=>(0,t.jsxs)(l.Z,{variant:"body2",onClick:()=>j(e),sx:{cursor:"pointer",color:b===e?"#0b7b4c":"text.secondary",fontWeight:b===e?600:400,position:"relative",paddingBottom:.5},children:["all"===e?"All request":e,b===e&&t.jsx(n.Z,{component:"span",sx:{position:"absolute",left:0,right:0,bottom:0,height:2,backgroundColor:"#0b7b4c",borderRadius:999}})]},e))})]}),(0,t.jsxs)(n.Z,{sx:{fontSize:12,color:"text.secondary",marginBottom:2,backgroundColor:"#fff",borderRadius:999,paddingY:1.2,paddingX:3,display:{xs:"none",md:"grid"},gridTemplateColumns:"1.2fr 1.6fr 1fr 1fr 1fr 1.2fr",alignItems:"center",gap:1},children:[t.jsx(n.Z,{children:"Offline code"}),t.jsx(n.Z,{children:"Name"}),t.jsx(n.Z,{children:"Amount"}),t.jsx(n.Z,{children:"Time"}),t.jsx(n.Z,{children:"Status"}),t.jsx(n.Z,{children:"Actions"})]}),t.jsx(n.Z,{sx:{marginTop:1,maxHeight:{xs:420,sm:"none"},overflowY:{xs:"auto",sm:"visible"}},children:y?(0,t.jsxs)(o.Z,{alignItems:"center",py:4,children:[t.jsx(c.Z,{sx:{color:"#0b7b4c"}}),t.jsx(l.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Loading loans..."})]}):v?(0,t.jsxs)(o.Z,{alignItems:"center",py:4,spacing:2,children:[t.jsx(l.Z,{color:"error",children:C.message}),t.jsx(x.Z,{variant:"outlined",onClick:()=>P(),size:"small",children:"Retry"})]}):(0,t.jsxs)(o.Z,{spacing:0,children:[q.map((e,s)=>{let r=_.get(e.userId),i=r?.name??"—",d=r?.code??e.userId.slice(-6),c=e.createdAt?new Date(e.createdAt).toLocaleTimeString("en-NG",{hour:"2-digit",minute:"2-digit"}):"—",u="PENDING"===e.status,p=I.isPending&&I.variables===e.id,h=R.isPending&&R.variables===e.id;return(0,t.jsxs)(n.Z,{sx:{paddingY:{xs:1.5,md:2},paddingX:{xs:2,md:3},borderBottom:s===q.length-1?"none":"1px solid #fff",backgroundColor:0===s?"#ffffff":"transparent",display:"grid",gridTemplateColumns:{xs:"1fr 1fr",md:"1.2fr 1.6fr 1fr 1fr 1fr 1.2fr"},alignItems:"center",gap:{xs:1,md:1},borderRadius:1},children:[(0,t.jsxs)(n.Z,{children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Code"}),(0,t.jsxs)(l.Z,{variant:"body2",sx:{fontWeight:600},children:["#",d]})]}),(0,t.jsxs)(n.Z,{children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Name"}),(0,t.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[t.jsx(m.Z,{src:r?.picture||void 0,sx:{width:32,height:32},children:(i?.[0]??"?").toUpperCase()}),t.jsx(l.Z,{variant:"body2",children:i})]})]}),(0,t.jsxs)(n.Z,{sx:{gridColumn:{xs:"1",md:"auto"}},children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Amount"}),(0,t.jsxs)(l.Z,{variant:"body2",children:["NGN ",Number(e.amount).toLocaleString()]})]}),(0,t.jsxs)(n.Z,{children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Time"}),(0,t.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[t.jsx(a.Z,{sx:{fontSize:18,color:"#6b6b6b"}}),t.jsx(l.Z,{variant:"body2",children:c})]})]}),(0,t.jsxs)(n.Z,{sx:{gridColumn:{xs:"2",md:"auto"}},children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Status"}),(0,t.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[t.jsx(n.Z,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:function(e){switch(e){case"REPAID":return"#22c55e";case"REJECTED":return"#ef4444";default:return"#f59e0b"}}(e.status)}}),t.jsx(l.Z,{variant:"body2",children:e.status})]})]}),(0,t.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",sx:{gridColumn:{xs:"1 / -1",md:"auto"}},children:[t.jsx(x.Z,{size:"small",variant:"contained",disabled:!u||p||h,onClick:()=>I.mutate(e.id),sx:{backgroundColor:"#22c55e","&:hover":{backgroundColor:"#16a34a"}},children:p?"...":"Accept"}),t.jsx(x.Z,{size:"small",variant:"outlined",color:"error",disabled:!u||p||h,onClick:()=>R.mutate(e.id),children:h?"...":"Reject"})]})]},e.id)}),0===q.length&&t.jsx(l.Z,{variant:"body2",color:"text.secondary",sx:{py:4,textAlign:"center"},children:"No loans match the filter."})]})}),t.jsx(o.Z,{alignItems:"center",sx:{marginTop:2},children:t.jsx(u.Z,{count:A,page:r,onChange:(e,s)=>f(s),color:"primary"})})]})})})]})}},72894:(e,s,r)=>{"use strict";r.d(s,{Z:()=>d});var t=r(10326),a=r(5420),i=r(88464),n=r(90541),o=r(57329),l=r(71728);function d({search:e,onSearchChange:s}){return(0,t.jsxs)(i.Z,{direction:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",spacing:2,sx:{marginBottom:3},children:[t.jsx(n.Z,{placeholder:"Search",value:e,onChange:e=>s(e.target.value),InputProps:{startAdornment:t.jsx(o.Z,{position:"start",children:t.jsx(a.Z,{sx:{color:"#97a6a0"}})})},sx:{width:{xs:"100%",sm:320,md:380},alignSelf:{xs:"stretch",md:"flex-start"},"& .MuiOutlinedInput-root":{backgroundColor:"#f3f3f3",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}}),t.jsx(l.Z,{})]})}},55692:(e,s,r)=>{"use strict";var t=r(39618);s.Z=void 0;var a=t(r(71133)),i=r(10326);s.Z=(0,a.default)((0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"}),"AccessTimeOutlined")},99069:(e,s,r)=>{"use strict";var t=r(39618);s.Z=void 0;var a=t(r(71133)),i=r(10326);s.Z=(0,a.default)((0,i.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},99283:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/loan-request/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[898,14,761,108,608,200,215,668],()=>r(89258));module.exports=t})();