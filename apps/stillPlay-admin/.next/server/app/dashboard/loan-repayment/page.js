(()=>{var e={};e.id=244,e.ids=[244],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15884:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(67038),r(13321),r(84752),r(35866);var t=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let d=["",{children:["dashboard",{children:["loan-repayment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,67038)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/loan-repayment/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,84752)),"/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/loan-repayment/page.tsx"],m="/dashboard/loan-repayment/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/loan-repayment/page",pathname:"/dashboard/loan-repayment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},28947:(e,s,r)=>{Promise.resolve().then(r.bind(r,22508))},22508:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var t=r(10326),a=r(55692),n=r(99069),i=r(71728),o=r(88464),l=r(30274),d=r(48260),c=r(98139),m=r(42265),p=r(33198),x=r(7345),u=r(17577),h=r(72894),g=r(92972);function f(){let[e,s]=(0,u.useState)(""),[r,f]=(0,u.useState)(1),{data:b,isLoading:y,isError:j,error:Z,refetch:v,isFetching:P}=(0,g.RB)(),{data:w=[]}=(0,g.Rm)(),C=b?.repayments??[],_=(0,u.useMemo)(()=>{let e=new Map;return w.forEach(s=>{let r=[s.firstName,s.lastName].filter(Boolean).join(" ")||s.email||"—";e.set(s.id,{name:r,picture:s.picture??null})}),e},[w]),k=(0,u.useMemo)(()=>{if(!e.trim())return C;let s=e.trim().toLowerCase();return C.filter(e=>{let r=_.get(e.userId);return r?.name.toLowerCase().includes(s)||e.amount.toString().includes(s)||e.id.toLowerCase().includes(s)||e.loanId.toLowerCase().includes(s)})},[C,e,_]),S=Math.max(1,Math.ceil(k.length/10)),I=(r-1)*10,M=k.slice(I,I+10);return(0,t.jsxs)(i.Z,{children:[t.jsx(h.Z,{search:e,onSearchChange:s}),t.jsx(i.Z,{sx:{background:"#ffffff",borderRadius:{xs:0,md:4},padding:{xs:2,md:3.5},paddingBottom:{xs:3,md:4},marginTop:{xs:2,md:3},marginX:{xs:-2,md:0},minHeight:"calc(100vh - 220px)",display:"flex",flexDirection:"column"},children:t.jsx(o.Z,{sx:{marginTop:"auto"},spacing:2,children:(0,t.jsxs)(i.Z,{sx:{borderRadius:3,padding:2,backgroundColor:"#f3f3f3",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(o.Z,{spacing:2,sx:{marginBottom:2,paddingTop:2,paddingLeft:{xs:1,md:2}},children:[(0,t.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,flexWrap:"wrap",children:[t.jsx(l.Z,{variant:"h6",sx:{fontWeight:700,fontSize:{xs:"1rem",md:"1.25rem"}},children:"REPAYMENT"}),t.jsx(d.Z,{size:"small",onClick:()=>v(),disabled:P,"aria-label":"Refresh",children:t.jsx(n.Z,{fontSize:"small"})})]}),t.jsx(o.Z,{direction:"row",spacing:4,alignItems:"center",children:(0,t.jsxs)(l.Z,{variant:"body2",sx:{color:"#0b7b4c",fontWeight:600,position:"relative",paddingBottom:.5},children:["All repayments",t.jsx(i.Z,{component:"span",sx:{position:"absolute",left:0,right:0,bottom:0,height:2,backgroundColor:"#0b7b4c",borderRadius:999}})]})})]}),(0,t.jsxs)(i.Z,{sx:{fontSize:12,color:"text.secondary",marginBottom:2,backgroundColor:"#fff",borderRadius:999,paddingY:1.2,paddingX:3,display:{xs:"none",md:"grid"},gridTemplateColumns:"2fr 1fr 1fr",alignItems:"center",gap:1},children:[t.jsx(i.Z,{children:"Name"}),t.jsx(i.Z,{children:"Amount"}),t.jsx(i.Z,{children:"Time"})]}),t.jsx(i.Z,{sx:{marginTop:1,maxHeight:{xs:420,sm:"none"},overflowY:{xs:"auto",sm:"visible"},overflowX:{xs:"auto",md:"visible"}},children:y?(0,t.jsxs)(o.Z,{alignItems:"center",py:4,children:[t.jsx(c.Z,{sx:{color:"#0b7b4c"}}),t.jsx(l.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Loading repayments..."})]}):j?(0,t.jsxs)(o.Z,{alignItems:"center",py:4,spacing:2,children:[t.jsx(l.Z,{color:"error",children:Z.message}),t.jsx(m.Z,{variant:"outlined",onClick:()=>v(),size:"small",children:"Retry"})]}):(0,t.jsxs)(o.Z,{spacing:0,children:[M.map((e,s)=>{let r=_.get(e.userId),n=r?.name??"—",d=e.repaidAt?new Date(e.repaidAt).toLocaleString("en-NG",{dateStyle:"short",timeStyle:"short"}):"—";return(0,t.jsxs)(i.Z,{sx:{paddingY:{xs:1.5,md:2},paddingX:{xs:2,md:3},borderBottom:s===M.length-1?"none":"1px solid #fff",display:"grid",gridTemplateColumns:{xs:"1fr 1fr",md:"2fr 1fr 1fr"},alignItems:"center",gap:{xs:1,md:1},borderRadius:1},children:[(0,t.jsxs)(i.Z,{sx:{gridColumn:{xs:"1 / -1",md:"auto"}},children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Name"}),(0,t.jsxs)(o.Z,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(p.Z,{src:r?.picture||void 0,sx:{width:36,height:36},children:(n?.[0]??"?").toUpperCase()}),t.jsx(l.Z,{variant:"body2",children:n})]})]}),(0,t.jsxs)(i.Z,{children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Amount"}),(0,t.jsxs)(l.Z,{variant:"body2",children:["NGN ",Number(e.amount).toLocaleString()]})]}),(0,t.jsxs)(i.Z,{sx:{gridColumn:{xs:"2",md:"auto"}},children:[t.jsx(l.Z,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",md:"none"}},children:"Time"}),(0,t.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[t.jsx(a.Z,{sx:{fontSize:18,color:"#6b6b6b"}}),t.jsx(l.Z,{variant:"body2",children:d})]})]})]},e.id)}),0===M.length&&t.jsx(l.Z,{variant:"body2",color:"text.secondary",sx:{py:4,textAlign:"center"},children:"No repayments yet."})]})}),t.jsx(o.Z,{alignItems:"center",sx:{marginTop:2},children:t.jsx(x.Z,{count:S,page:r,onChange:(e,s)=>f(s),color:"primary"})})]})})})]})}},72894:(e,s,r)=>{"use strict";r.d(s,{Z:()=>d});var t=r(10326),a=r(5420),n=r(88464),i=r(90541),o=r(57329),l=r(71728);function d({search:e,onSearchChange:s}){return(0,t.jsxs)(n.Z,{direction:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",spacing:2,sx:{marginBottom:3},children:[t.jsx(i.Z,{placeholder:"Search",value:e,onChange:e=>s(e.target.value),InputProps:{startAdornment:t.jsx(o.Z,{position:"start",children:t.jsx(a.Z,{sx:{color:"#97a6a0"}})})},sx:{width:{xs:"100%",sm:320,md:380},alignSelf:{xs:"stretch",md:"flex-start"},"& .MuiOutlinedInput-root":{backgroundColor:"#f3f3f3",borderRadius:999,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}}}}),t.jsx(l.Z,{})]})}},55692:(e,s,r)=>{"use strict";var t=r(39618);s.Z=void 0;var a=t(r(71133)),n=r(10326);s.Z=(0,a.default)((0,n.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"}),"AccessTimeOutlined")},99069:(e,s,r)=>{"use strict";var t=r(39618);s.Z=void 0;var a=t(r(71133)),n=r(10326);s.Z=(0,a.default)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},67038:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/loan-repayment/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[898,14,761,108,608,200,215,33],()=>r(15884));module.exports=t})();