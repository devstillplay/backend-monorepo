exports.id=215,exports.ids=[215],exports.modules={88864:(e,t,a)=>{Promise.resolve().then(a.bind(a,51378))},31103:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},51378:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var r=a(10326),s=a(4713),o=a(95148),i=a(71728),n=a(22852),l=a(44976),d=a(17577);let c=(0,a(5062).Z)({palette:{primary:{main:"#0b7b4c"},secondary:{main:"#ff9f1a"},background:{default:"#f4f6f5",paper:"#ffffff"},text:{primary:"#1f1f1f",secondary:"#6b6b6b"}},typography:{fontFamily:'"Inter", "Segoe UI", Arial, sans-serif',h3:{fontWeight:700},h4:{fontWeight:700}},shape:{borderRadius:18},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:999,fontWeight:600}}},MuiTextField:{defaultProps:{variant:"outlined",size:"small"}},MuiOutlinedInput:{styleOverrides:{input:{paddingTop:14,paddingBottom:14}}}}});function m({children:e}){let[t]=(0,d.useState)(()=>new n.S({defaultOptions:{queries:{refetchOnWindowFocus:!0,staleTime:6e4}}}));return r.jsx(l.aH,{client:t,children:(0,r.jsxs)(s.Z,{theme:c,children:[r.jsx(o.ZP,{}),r.jsx(i.Z,{sx:{width:"100%",maxWidth:"100vw",minHeight:"100vh",overflowX:"hidden",boxSizing:"border-box"},children:e})]})})}},5031:(e,t,a)=>{"use strict";function r(){return"https://api-gateway-production-dab1.up.railway.app/api"}function s(){if(!r())throw Error("API URL not configured. Set NEXT_PUBLIC_API_BASE_URL in .env.local or Railway (e.g. https://your-api.railway.app/api).")}a.d(t,{jY:()=>P,$g:()=>$,xl:()=>y,zN:()=>x,r8:()=>B,Qz:()=>U,Er:()=>m,eJ:()=>R,hO:()=>W,I2:()=>j,Hd:()=>p,WN:()=>b,o3:()=>I,hJ:()=>w,Rt:()=>A,p0:()=>v,Cy:()=>f,zO:()=>J,cA:()=>E,Cb:()=>S,vG:()=>C,xp:()=>_,BX:()=>u,ey:()=>g,ho:()=>O,G7:()=>h,f8:()=>k,c0:()=>T,WD:()=>q,C_:()=>F,vr:()=>c,Ix:()=>L,VP:()=>N});let o={auth:{requestCode:()=>`${r()}/auth/request-code`,verifyCode:()=>`${r()}/auth/verify-code`,login:()=>`${r()}/auth/login`,register:()=>`${r()}/auth/register`,forgotPassword:()=>`${r()}/auth/forgot-password`,resetPassword:()=>`${r()}/auth/reset-password`},admin:{users:()=>`${r()}/admin/users`,userById:e=>`${r()}/admin/users/${e}`,employees:()=>`${r()}/admin/employees`,employeeById:e=>`${r()}/admin/employees/${e}`,activity:()=>`${r()}/admin/activity`,loans:{eligibility:e=>`${r()}/loans/eligibility/${e}`,request:()=>`${r()}/admin/loans/request`,all:()=>`${r()}/admin/loans`,allRepayments:()=>`${r()}/admin/loans/all/repayments`,userLoans:e=>`${r()}/admin/loans/user/${e}`,userRepayments:e=>`${r()}/admin/loans/user/${e}/repayments`,loanRepayments:e=>`${r()}/admin/loans/${e}/repayments`,userWallet:e=>`${r()}/admin/loans/user/${e}/wallet`,approve:()=>`${r()}/admin/loans/approve`,reject:()=>`${r()}/admin/loans/reject`}},settings:{get:()=>`${r()}/admin/settings`,set:()=>`${r()}/admin/settings`},providers:{list:()=>`${r()}/providers`,one:e=>`${r()}/providers/${e}`,create:()=>`${r()}/providers`,update:e=>`${r()}/providers/${e}`},files:{upload:()=>`${r()}/files/upload`}};var i=a(15653),n=a(8907);function l(e){let t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t}function d(e){401===e.status&&(i.t.getState().reset(),n.LM.getState().reset())}async function c(e,t,a){let r=await fetch(o.admin.userById(t),{method:"PATCH",headers:l(e),body:JSON.stringify(a)}),s=await r.json().catch(()=>({}));if(!r.ok)throw d(r),Error("string"==typeof s.message?s.message:Array.isArray(s.message)?s.message[0]:"Failed to update user");return s}async function m(e,t){let a=await fetch(o.admin.userById(t),{method:"DELETE",headers:l(e)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to delete user");return r}async function u(e,t){let a=await fetch(o.admin.activity(),{method:"POST",headers:l(e),body:JSON.stringify(t)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to record activity");return r}async function f(e,t){let a=new URL(o.admin.activity());null!=t&&a.searchParams.set("limit",String(t));let r=await fetch(a.toString(),{headers:l(e)}),s=await r.json().catch(()=>({}));if(!r.ok)throw d(r),Error("string"==typeof s.message?s.message:"Failed to load activity");return s}async function h(e,t){let a=await fetch(o.admin.loans.request(),{method:"POST",headers:l(e),body:JSON.stringify(t)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to request loan");return r}async function y(e,t){let a=await fetch(o.admin.loans.approve(),{method:"POST",headers:l(e),body:JSON.stringify({loanId:t})}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:"Failed to approve loan");return r}async function g(e,t){let a=await fetch(o.admin.loans.reject(),{method:"POST",headers:l(e),body:JSON.stringify({loanId:t})}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:"Failed to reject loan");return r}async function p(e,t){let a=await fetch(o.admin.loans.eligibility(t),{headers:l(e)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:"Failed to load eligibility");return r}async function w(e,t){let a=await fetch(o.admin.loans.userLoans(t),{headers:l(e)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:"Failed to load loans");return{loans:Array.isArray(r.loans)?r.loans:[]}}async function A(e,t){let a=await fetch(o.admin.loans.userRepayments(t),{headers:l(e)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:"Failed to load repayments");return{userId:r.userId??t,repayments:Array.isArray(r.repayments)?r.repayments:[]}}async function v(e,t){let a=await fetch(o.admin.loans.userWallet(t),{headers:l(e)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:"Failed to load wallet");return r}async function E(e){let t=await fetch(o.admin.loans.all(),{headers:l(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw d(t),Error("string"==typeof a.message?a.message:"Failed to load loans");return{loans:Array.isArray(a.loans)?a.loans:[]}}async function S(e){let t=await fetch(o.admin.loans.allRepayments(),{headers:l(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw d(t),Error("string"==typeof a.message?a.message:"Failed to load repayments");return{repayments:Array.isArray(a.repayments)?a.repayments:[]}}let P=["Super Admin","Finance","Customer Support","Operations","Legal & Compliance","Auditor"];function b(e){let t=e.agreedAmount??null;return null==t||t<=0?null:Math.round(t*(1+(e.providerCutPercentage??0)/100)*100)/100}function j(e){let t=e.agreedAmount??null;if(null==t||t<=0)return null;let a=(e.percentageToAdd??0)-(e.providerCutPercentage??0);return a<=0?0:Math.round(a/100*t*100)/100}async function $(e){let t=await fetch(o.auth.login(),{method:"POST",headers:l(),body:JSON.stringify({email:e.email.trim(),password:e.password})}),a=await t.json().catch(()=>({}));if(!t.ok)throw Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Invalid email or password");return a}async function O(e){let t=await fetch(o.auth.requestCode(),{method:"POST",headers:l(),body:JSON.stringify(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Failed to send code");return a}async function k(e){s();let t=await fetch(o.auth.forgotPassword(),{method:"POST",headers:l(),body:JSON.stringify({email:e.trim()})}),a=await t.json().catch(()=>({}));if(!t.ok)throw Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Failed to send reset code");return a}function I(){return null}function F(e){}function x(){}async function L(e,t){s();let a=new FormData;a.append("file",e),t?.folder&&a.append("folder",t.folder);let r={};t?.token&&(r.Authorization=`Bearer ${t.token}`);let i=await fetch(o.files.upload(),{method:"POST",headers:r,body:a}),n=await i.json().catch(()=>({}));if(!i.ok)throw Error("string"==typeof n.message?n.message:n.error??"Upload failed");if(n&&"object"==typeof n&&"error"in n)throw Error(n.error);return n}async function T(e){s();let t=await fetch(o.auth.resetPassword(),{method:"POST",headers:l(),body:JSON.stringify(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw Error("string"==typeof a.message?a.message:Array.isArray(a.message)?a.message[0]:"Failed to reset password");return a}async function N(e){s();let t=await fetch(o.auth.verifyCode(),{method:"POST",headers:l(),body:JSON.stringify(e)}),a=await t.text(),r={};try{r=a?JSON.parse(a):{}}catch{if(a.trimStart().startsWith("<!"))throw Error("Received a web page instead of API. Set NEXT_PUBLIC_API_BASE_URL in .env.local to your API gateway (e.g. http://localhost:3000/api) and restart.");throw Error(a.slice(0,120)||"Invalid or expired code")}if(!t.ok)throw Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Invalid or expired code");return r}async function J(e){let t=await fetch(o.admin.users(),{headers:l(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw d(t),Error("string"==typeof a.message?a.message:"Failed to load users");return Array.isArray(a)?a:a.users??[]}async function R(e,t){let a=await fetch(o.admin.userById(t),{headers:l(e)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:"Failed to load user");return r}async function C(e){let t=await fetch(o.admin.employees(),{headers:l(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw d(t),Error("string"==typeof a.message?a.message:"Failed to load staff");return Array.isArray(a)?a:a.employees??[]}async function B(e,t){let a=await fetch(o.admin.employees(),{method:"POST",headers:l(e),body:JSON.stringify(t)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to create staff");return r}async function _(e){let t=await fetch(o.providers.list(),{headers:l(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw d(t),Error("string"==typeof a.message?a.message:"Failed to load providers");return Array.isArray(a)?a:a.providers??[]}async function U(e,t){let a=await fetch(o.providers.create(),{method:"POST",headers:l(e),body:JSON.stringify(t)}),r=await a.json().catch(()=>({}));if(!a.ok)throw d(a),Error("string"==typeof r.message?r.message:Array.isArray(r.message)?r.message[0]:"Failed to create provider");return r}async function W(e){let t=await fetch(o.settings.get(),{headers:l(e)}),a=await t.json().catch(()=>({}));if(!t.ok)throw d(t),Error("string"==typeof a.message?a.message:"Failed to load settings");return a}async function q(e,t,a){let r=await fetch(o.settings.set(),{method:"POST",headers:l(e),body:JSON.stringify({key:t,value:a})}),s=await r.json().catch(()=>({}));if(!r.ok)throw d(r),Error("string"==typeof s.message?s.message:"Failed to save setting");return s}},15653:(e,t,a)=>{"use strict";a.d(t,{t:()=>n});var r=a(60114),s=a(85251),o=a(8907);let i={status:"unauthenticated",token:null,user:null,otpEmail:null,otpExpiresAt:null,fullName:null,_hasRehydrated:!1,lastLoginAt:null,lastLoginIp:null,lastAction:null},n=(0,r.Ue)()((0,s.tJ)(e=>({...i,setPendingOtp:(t,a,r)=>e({status:"otp_required",otpEmail:t,otpExpiresAt:a,fullName:r??null}),setAuthenticated:(t,a)=>e({status:"authenticated",token:t,user:a,otpEmail:null,otpExpiresAt:null,lastLoginAt:Date.now()}),setUser:t=>e({user:t}),setRehydrated:()=>e({_hasRehydrated:!0}),setLastAction:t=>e({lastAction:t}),setLastLoginIp:t=>e({lastLoginIp:t}),reset:()=>e(i)}),{name:"stillplay-admin-auth",storage:(0,s.FL)(()=>({getItem:()=>null,setItem:()=>{},removeItem:()=>{}})),partialize:e=>({status:e.status,token:e.token,user:e.user,fullName:e.fullName,otpEmail:e.otpEmail,otpExpiresAt:e.otpExpiresAt,lastLoginAt:e.lastLoginAt,lastLoginIp:e.lastLoginIp,lastAction:e.lastAction}),onRehydrateStorage:()=>()=>{let e=n.getState();e.setRehydrated(),e.user&&o.LM.getState().setProfile(e.user)}}))},8907:(e,t,a)=>{"use strict";a.d(t,{LM:()=>i});var r=a(60114),s=a(85251);let o={getItem:()=>null,setItem:()=>{},removeItem:()=>{}},i=(0,r.Ue)()((0,s.tJ)(e=>({profile:null,setProfile:t=>e({profile:t}),reset:()=>e({profile:null})}),{name:"stillplay-admin-user",storage:(0,s.FL)(()=>o),partialize:e=>({profile:e.profile})}))},84752:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,metadata:()=>o});var r=a(19510);let s=(0,a(68570).createProxy)(String.raw`/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/providers.tsx#default`);a(67272);let o={title:"Still Play Admin",description:"Admin login and dashboard"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(s,{children:e})})})}},67272:()=>{}};