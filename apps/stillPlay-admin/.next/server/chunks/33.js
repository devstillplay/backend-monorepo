exports.id=33,exports.ids=[33],exports.modules={15958:(e,t,n)=>{Promise.resolve().then(n.bind(n,23264))},23264:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});var a=n(10326),s=n(71728),r=n(88464),i=n(30274),l=n(48260),o=n(19074),u=n(59291),d=n(17577),c=n(35047),y=n(54293),p=n(64010),f=n(86820),h=n(37232),x=n(80261),m=n(72399),b=n(98842),g=n(74726),v=n(65797),j=n(33198),q=n(98139),Z=n(99207),k=n(42265),K=n(45408),S=n(80110),C=n(2241),L=n(90434),F=n(5031),P=n(92972),Q=n(15653),w=n(8907);let D=[{label:"Overview",href:"/dashboard",icon:a.jsx(p.Z,{})},{label:"Users",href:"/dashboard?tab=users",icon:a.jsx(m.Z,{})},{label:"Providers",href:"/dashboard/providers",icon:a.jsx(y.Z,{})},{label:"Staff",href:"/dashboard/staff",icon:a.jsx(f.Z,{})},{label:"Loan Request",href:"/dashboard/loan-request",icon:a.jsx(b.Z,{})},{label:"Loan Repayment",href:"/dashboard/loan-repayment",icon:a.jsx(x.Z,{})},{label:"Support",href:"/dashboard/support",icon:a.jsx(v.Z,{})},{label:"Settings",href:"/dashboard/settings",icon:a.jsx(g.Z,{})}];function N({onNavigate:e}){let t=(0,c.usePathname)(),n=(0,c.useRouter)(),l=(0,c.useSearchParams)().get("tab"),o=(0,d.useRef)(null),[u,y]=(0,d.useState)(!1),[p,f]=(0,d.useState)(!1),[x,m]=(0,d.useState)(!1),[b,g]=(0,d.useState)(""),v=(0,Q.t)(e=>e.reset),N=(0,Q.t)(e=>e.token),R=(0,Q.t)(e=>e.fullName),T=(0,Q.t)(e=>e.user),O=(0,Q.t)(e=>e.setUser),I=(0,w.LM)(e=>e.profile),W=(0,w.LM)(e=>e.setProfile),U=(0,w.LM)(e=>e.reset),A=(0,P.hV)(),{data:z}=(0,P.Xl)(),E=z?.loans?.filter(e=>"PENDING"===e.status).length??0,H=I?.firstName&&I?.lastName?`${I.firstName} ${I.lastName}`.trim():I?.firstName??I?.email??R??"Admin",X=I?.role??T?.role?String(I?.role??T?.role).trim():"Admin",B=I?.email??T?.email??"",Y=I?.picture??T?.picture??null,G=I?.id??T?.id,M=async e=>{let t=e.target.files?.[0];if(t){if(!G||!N){g("Cannot update photo: session or user id missing. Try logging in again."),m(!0),e.target.value="";return}y(!0);try{let e=await (0,F.Ix)(t,{folder:"stillplay/avatars",token:N});A.mutate({id:G,payload:{picture:e.secureUrl}},{onSuccess:()=>{let t=e.secureUrl;I&&W({...I,picture:t}),T&&O({...T,picture:t}),f(!0)},onSettled:()=>y(!1)})}catch(e){console.error(e),y(!1),g(e instanceof Error?e.message:"Upload failed"),m(!0)}finally{e.target.value=""}}};return(0,a.jsxs)(r.Z,{component:C.E.aside,initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{duration:.45,ease:"easeOut"},sx:{padding:{xs:2,md:3},height:"100%",minHeight:"100vh",justifyContent:"space-between"},children:[(0,a.jsxs)(r.Z,{spacing:3,children:[a.jsx(s.Z,{component:"img",src:"/assets/svg/STILL PLAYLOGOBL.svg",alt:"Still Play",sx:{width:140,height:"auto",marginX:"auto"}}),(0,a.jsxs)(s.Z,{sx:{textAlign:"center"},children:[a.jsx("input",{id:"sidebar-avatar-upload",ref:o,type:"file",accept:"image/*",style:{display:"none"},"aria-label":"Upload profile photo",disabled:u||A.isPending,onChange:M}),(0,a.jsxs)(s.Z,{component:"label",htmlFor:"sidebar-avatar-upload",sx:{position:"relative",display:"inline-block",margin:"0 auto 8px",cursor:G?"pointer":"default"},children:[a.jsx(j.Z,{src:Y??void 0,sx:{width:76,height:76,border:"2px solid #0b7b4c",opacity:u||A.isPending?.7:1},children:(H?.[0]??"?").toUpperCase()}),(u||A.isPending)&&a.jsx(s.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",bgcolor:"rgba(0,0,0,0.4)",pointerEvents:"none"},children:a.jsx(q.Z,{size:32,sx:{color:"white"}})})]}),a.jsx(i.Z,{variant:"subtitle2",children:H.toUpperCase()}),B?a.jsx(i.Z,{variant:"caption",color:"text.secondary",display:"block",children:B}):null,a.jsx(i.Z,{variant:"caption",color:"primary",children:X.toUpperCase()})]}),a.jsx(Z.Z,{sx:{opacity:.5}}),a.jsx(r.Z,{spacing:1,children:D.map(n=>{let s="/dashboard"===n.href&&!n.href.includes("?"),r=n.href.includes("tab=users"),i=s?"/dashboard"===t&&"users"!==l:r?"/dashboard"===t&&"users"===l:t===n.href.split("?")[0],o="/dashboard/loan-request"===n.href&&E>0;return a.jsx(L.default,{href:n.href,style:{textDecoration:"none"},children:a.jsx(k.Z,{fullWidth:!0,variant:"text",startIcon:o?a.jsx(K.Z,{badgeContent:E,color:"error",sx:{"& .MuiBadge-badge":{fontSize:11,fontWeight:700,minWidth:18,height:18}},children:n.icon}):n.icon,onClick:e,sx:{justifyContent:"flex-start",color:i?"#f59e0b":"text.primary",backgroundColor:i?"#f3f3f3":"transparent",borderRadius:999,paddingY:1,paddingX:2},children:n.label})},n.href)})}),a.jsx(L.default,{href:"/dashboard/staff",style:{textDecoration:"none"},children:a.jsx(k.Z,{variant:"contained",size:"small",fullWidth:!0,onClick:e,children:"Create Admin Account"})})]}),(0,a.jsxs)(r.Z,{spacing:2,children:[a.jsx(Z.Z,{sx:{opacity:.5}}),a.jsx(k.Z,{variant:"text",color:"error",startIcon:a.jsx(h.Z,{}),onClick:()=>{v(),U(),n.push("/")},sx:{justifyContent:"flex-start"},children:"Log out"})]}),a.jsx(S.Z,{open:p,autoHideDuration:4e3,onClose:()=>f(!1),message:"Profile photo updated successfully",anchorOrigin:{vertical:"bottom",horizontal:"center"},ContentProps:{sx:{bgcolor:"success.main",color:"success.contrastText"}}}),a.jsx(S.Z,{open:x,autoHideDuration:6e3,onClose:()=>m(!1),message:b,anchorOrigin:{vertical:"bottom",horizontal:"center"},ContentProps:{sx:{bgcolor:"error.main",color:"error.contrastText"}}})]})}function R({children:e}){(0,c.useRouter)(),(0,c.usePathname)(),(0,Q.t)(e=>e.status),(0,Q.t)(e=>e.token),(0,Q.t)(e=>e.setLastAction),(0,Q.t)(e=>e.lastLoginIp),(0,Q.t)(e=>e._hasRehydrated);let[t,n]=(0,d.useState)(!1);return(0,a.jsxs)(s.Z,{sx:{minHeight:"100vh",backgroundColor:"#fff",display:{xs:"flex",md:"grid"},flexDirection:{xs:"column",md:"unset"},gridTemplateColumns:{md:"260px 1fr"}},children:[a.jsx(s.Z,{sx:{display:{xs:"none",md:"block"}},children:a.jsx(d.Suspense,{fallback:null,children:a.jsx(N,{})})}),(0,a.jsxs)(r.Z,{sx:{flex:1},children:[(0,a.jsxs)(r.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{display:{xs:"flex",md:"none"},paddingX:2,paddingY:1.5,borderBottom:"1px solid #edf2ef"},children:[a.jsx(i.Z,{variant:"h6",fontWeight:700,children:"Dashboard"}),a.jsx(l.Z,{onClick:()=>n(!0),children:a.jsx(u.Z,{})})]}),a.jsx(s.Z,{sx:{padding:{xs:2,md:3},flex:1},children:e})]}),a.jsx(o.ZP,{open:t,onClose:()=>n(!1),sx:{display:{xs:"block",md:"none"}},PaperProps:{sx:{width:260}},children:a.jsx(d.Suspense,{fallback:null,children:a.jsx(N,{onNavigate:()=>n(!1)})})})]})}},92972:(e,t,n)=>{"use strict";n.d(t,{Cx:()=>g,HI:()=>q,Hv:()=>F,It:()=>j,OL:()=>b,P7:()=>Z,RB:()=>S,Rm:()=>d,XO:()=>c,Xl:()=>K,Y7:()=>h,Yn:()=>P,bA:()=>f,cy:()=>C,ez:()=>m,hV:()=>y,ko:()=>x,l2:()=>v,pv:()=>k,ur:()=>L,yf:()=>p});var a=n(20108),s=n(44976),r=n(10119),i=n(15653),l=n(5031);let o={all:["admin"],users:()=>[...o.all,"users"],user:e=>[...o.users(),e],employees:()=>[...o.all,"employees"],activity:()=>[...o.all,"activity"],settings:()=>[...o.all,"settings"],loans:{all:()=>[...o.all,"loans","all"],allRepayments:()=>[...o.all,"loans","repayments","all"],userLoans:e=>[...o.all,"loans","user",e],userRepayments:e=>[...o.all,"loans","repayments","user",e],userWallet:e=>[...o.all,"loans","wallet",e],userEligibility:e=>[...o.all,"loans","eligibility",e]}},u={all:["providers"],list:()=>[...u.all,"list"]};function d(){let e=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.users(),queryFn:()=>(0,l.zO)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function c(e){let t=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:[...o.users(),"detail",e],queryFn:()=>(0,l.eJ)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function y(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:({id:t,payload:n})=>(0,l.vr)(e,t,n),onSuccess:()=>{t.invalidateQueries({queryKey:o.users()}),f({action:"User edited"}),t.invalidateQueries({queryKey:o.activity()})}})}function p(e){let t=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:[...o.activity(),e??50],queryFn:()=>(0,l.Cy)(t,e),enabled:!!t,staleTime:3e4})}function f(e){let t=i.t.getState().token;t&&(0,l.BX)(t,e).catch(()=>{})}function h(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:t=>(0,l.Er)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:o.users()}),f({action:"User deleted"}),t.invalidateQueries({queryKey:o.activity()})}})}function x(){let e=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:u.list(),queryFn:()=>(0,l.xp)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function m(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:t=>(0,l.Qz)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:u.list()}),f({action:"Provider added"}),t.invalidateQueries({queryKey:o.activity()})}})}function b(){let e=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.employees(),queryFn:()=>(0,l.vG)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function g(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:t=>(0,l.r8)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:o.employees()}),f({action:"Staff/employee created"}),t.invalidateQueries({queryKey:o.activity()})}})}function v(e){let t=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.loans.userLoans(e??""),queryFn:()=>(0,l.hJ)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function j(e){let t=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.loans.userRepayments(e??""),queryFn:()=>(0,l.Rt)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function q(e){let t=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.loans.userWallet(e??""),queryFn:()=>(0,l.p0)(t,e),enabled:!!t&&!!e,staleTime:3e4})}function Z(e){let t=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.loans.userEligibility(e??""),queryFn:()=>(0,l.Hd)(t,e),enabled:!!t&&!!e,staleTime:15e3})}function k(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:t=>(0,l.G7)(e,t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:o.loans.userLoans(n.userId)}),t.invalidateQueries({queryKey:o.loans.userWallet(n.userId)}),t.invalidateQueries({queryKey:o.loans.userRepayments(n.userId)}),t.invalidateQueries({queryKey:o.loans.userEligibility(n.userId)}),t.invalidateQueries({queryKey:o.loans.all()}),t.invalidateQueries({queryKey:o.loans.allRepayments()})}})}function K(){let e=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.loans.all(),queryFn:()=>(0,l.cA)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:3e4})}function S(){let e=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.loans.allRepayments(),queryFn:()=>(0,l.Cb)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:3e4})}function C(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:t=>(0,l.xl)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:o.loans.all()}),f({action:"Loan approved"}),t.invalidateQueries({queryKey:o.activity()})}})}function L(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:t=>(0,l.ey)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:o.loans.all()}),f({action:"Loan rejected"}),t.invalidateQueries({queryKey:o.activity()})}})}function F(){let e=(0,i.t)(e=>e.token);return(0,a.a)({queryKey:o.settings(),queryFn:()=>(0,l.hO)(e),enabled:!!e,staleTime:6e4})}function P(){let e=(0,i.t)(e=>e.token),t=(0,s.NL)();return(0,r.D)({mutationFn:({key:t,value:n})=>(0,l.WD)(e,t,n),onSuccess:()=>{t.invalidateQueries({queryKey:o.settings()})}})}},13321:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});let a=(0,n(68570).createProxy)(String.raw`/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/layout.tsx#default`)}};