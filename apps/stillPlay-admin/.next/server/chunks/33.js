exports.id=33,exports.ids=[33],exports.modules={5958:(e,t,s)=>{Promise.resolve().then(s.bind(s,3264))},3264:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(326),n=s(1728),a=s(8464),i=s(274),o=s(8260),l=s(9074),d=s(9291),c=s(7577),u=s(5047),p=s(4293),x=s(6820),h=s(7232),f=s(2399),m=s(4726),y=s(5797),g=s(3198),b=s(8139),j=s(9207),v=s(2265),Z=s(110),C=s(2241),k=s(434),P=s(5031),S=s(2972),L=s(5653),q=s(8907);let w=[{label:"Users",href:"/dashboard",icon:r.jsx(f.Z,{})},{label:"Providers",href:"/dashboard/providers",icon:r.jsx(p.Z,{})},{label:"Staff",href:"/dashboard/staff",icon:r.jsx(x.Z,{})},{label:"Loan Request",href:"/dashboard/loan-request"},{label:"Loan Repayment",href:"/dashboard/loan-repayment"},{label:"Support",href:"/dashboard/support",icon:r.jsx(y.Z,{})},{label:"Settings",href:"/dashboard/settings",icon:r.jsx(m.Z,{})}];function F({onNavigate:e}){let t=(0,u.usePathname)(),s=(0,u.useRouter)(),o=(0,c.useRef)(null),[l,d]=(0,c.useState)(!1),[p,x]=(0,c.useState)(!1),[f,m]=(0,c.useState)(!1),[y,F]=(0,c.useState)(""),D=(0,L.t)(e=>e.reset),N=(0,L.t)(e=>e.token),O=(0,L.t)(e=>e.fullName),U=(0,L.t)(e=>e.user),R=(0,L.t)(e=>e.setUser),T=(0,q.LM)(e=>e.profile),A=(0,q.LM)(e=>e.setProfile),K=(0,q.LM)(e=>e.reset),z=(0,S.hV)(),I=T?.firstName&&T?.lastName?`${T.firstName} ${T.lastName}`.trim():T?.firstName??T?.email??O??"Admin",W=T?.role??U?.role?String(T?.role??U?.role).trim():"Admin",Q=T?.email??U?.email??"",E=T?.picture??U?.picture??null,H=T?.id??U?.id,X=async e=>{let t=e.target.files?.[0];if(t){if(!H||!N){F("Cannot update photo: session or user id missing. Try logging in again."),m(!0),e.target.value="";return}d(!0);try{let e=await (0,P.Ix)(t,{folder:"stillplay/avatars",token:N});z.mutate({id:H,payload:{picture:e.secureUrl}},{onSuccess:()=>{let t=e.secureUrl;T&&A({...T,picture:t}),U&&R({...U,picture:t}),x(!0)},onSettled:()=>d(!1)})}catch(e){console.error(e),d(!1),F(e instanceof Error?e.message:"Upload failed"),m(!0)}finally{e.target.value=""}}};return(0,r.jsxs)(a.Z,{component:C.E.aside,initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{duration:.45,ease:"easeOut"},sx:{padding:{xs:2,md:3},height:"100%",minHeight:"100vh",justifyContent:"space-between"},children:[(0,r.jsxs)(a.Z,{spacing:3,children:[r.jsx(n.Z,{component:"img",src:"/assets/svg/STILL PLAYLOGOBL.svg",alt:"Still Play",sx:{width:140,height:"auto",marginX:"auto"}}),(0,r.jsxs)(n.Z,{sx:{textAlign:"center"},children:[r.jsx("input",{id:"sidebar-avatar-upload",ref:o,type:"file",accept:"image/*",style:{display:"none"},"aria-label":"Upload profile photo",disabled:l||z.isPending,onChange:X}),(0,r.jsxs)(n.Z,{component:"label",htmlFor:"sidebar-avatar-upload",sx:{position:"relative",display:"inline-block",margin:"0 auto 8px",cursor:H?"pointer":"default"},children:[r.jsx(g.Z,{src:E??void 0,sx:{width:76,height:76,border:"2px solid #0b7b4c",opacity:l||z.isPending?.7:1},children:(I?.[0]??"?").toUpperCase()}),(l||z.isPending)&&r.jsx(n.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",bgcolor:"rgba(0,0,0,0.4)",pointerEvents:"none"},children:r.jsx(b.Z,{size:32,sx:{color:"white"}})})]}),r.jsx(i.Z,{variant:"subtitle2",children:I.toUpperCase()}),Q?r.jsx(i.Z,{variant:"caption",color:"text.secondary",display:"block",children:Q}):null,r.jsx(i.Z,{variant:"caption",color:"primary",children:W.toUpperCase()})]}),r.jsx(j.Z,{sx:{opacity:.5}}),r.jsx(a.Z,{spacing:1,children:w.map(s=>{let n=t===s.href;return r.jsx(k.default,{href:s.href,style:{textDecoration:"none"},children:r.jsx(v.Z,{fullWidth:!0,variant:"text",startIcon:s.icon,onClick:e,sx:{justifyContent:"flex-start",color:n?"#f59e0b":"text.primary",backgroundColor:n?"#f3f3f3":"transparent",borderRadius:999,paddingY:1,paddingX:2},children:s.label})},s.href)})}),r.jsx(k.default,{href:"/dashboard/staff",style:{textDecoration:"none"},children:r.jsx(v.Z,{variant:"contained",size:"small",fullWidth:!0,onClick:e,children:"Create Admin Account"})})]}),(0,r.jsxs)(a.Z,{spacing:2,children:[r.jsx(j.Z,{sx:{opacity:.5}}),r.jsx(v.Z,{variant:"text",color:"error",startIcon:r.jsx(h.Z,{}),onClick:()=>{D(),K(),s.push("/")},sx:{justifyContent:"flex-start"},children:"Log out"})]}),r.jsx(Z.Z,{open:p,autoHideDuration:4e3,onClose:()=>x(!1),message:"Profile photo updated successfully",anchorOrigin:{vertical:"bottom",horizontal:"center"},ContentProps:{sx:{bgcolor:"success.main",color:"success.contrastText"}}}),r.jsx(Z.Z,{open:f,autoHideDuration:6e3,onClose:()=>m(!1),message:y,anchorOrigin:{vertical:"bottom",horizontal:"center"},ContentProps:{sx:{bgcolor:"error.main",color:"error.contrastText"}}})]})}function D({children:e}){(0,u.useRouter)(),(0,u.usePathname)(),(0,L.t)(e=>e.status),(0,L.t)(e=>e.token),(0,L.t)(e=>e.setLastAction),(0,L.t)(e=>e.lastLoginIp),(0,L.t)(e=>e._hasRehydrated);let[t,s]=(0,c.useState)(!1);return(0,r.jsxs)(n.Z,{sx:{minHeight:"100vh",backgroundColor:"#fff",display:{xs:"flex",md:"grid"},flexDirection:{xs:"column",md:"unset"},gridTemplateColumns:{md:"260px 1fr"}},children:[r.jsx(n.Z,{sx:{display:{xs:"none",md:"block"}},children:r.jsx(F,{})}),(0,r.jsxs)(a.Z,{sx:{flex:1},children:[(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{display:{xs:"flex",md:"none"},paddingX:2,paddingY:1.5,borderBottom:"1px solid #edf2ef"},children:[r.jsx(i.Z,{variant:"h6",fontWeight:700,children:"Dashboard"}),r.jsx(o.Z,{onClick:()=>s(!0),children:r.jsx(d.Z,{})})]}),r.jsx(n.Z,{sx:{padding:{xs:2,md:3},flex:1},children:e})]}),r.jsx(l.ZP,{open:t,onClose:()=>s(!1),sx:{display:{xs:"block",md:"none"}},PaperProps:{sx:{width:260}},children:r.jsx(F,{onNavigate:()=>s(!1)})})]})}},2972:(e,t,s)=>{"use strict";s.d(t,{Cx:()=>g,OL:()=>y,Rm:()=>c,Y7:()=>h,bA:()=>x,ez:()=>m,hV:()=>u,ko:()=>f,yf:()=>p});var r=s(108),n=s(4976),a=s(119),i=s(5653),o=s(5031);let l={all:["admin"],users:()=>[...l.all,"users"],user:e=>[...l.users(),e],employees:()=>[...l.all,"employees"],activity:()=>[...l.all,"activity"]},d={all:["providers"],list:()=>[...d.all,"list"]};function c(){let e=(0,i.t)(e=>e.token);return(0,r.a)({queryKey:l.users(),queryFn:()=>(0,o.zO)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function u(){let e=(0,i.t)(e=>e.token),t=(0,n.NL)();return(0,a.D)({mutationFn:({id:t,payload:s})=>(0,o.vr)(e,t,s),onSuccess:()=>{t.invalidateQueries({queryKey:l.users()})}})}function p(e){let t=(0,i.t)(e=>e.token);return(0,r.a)({queryKey:[...l.activity(),e??50],queryFn:()=>(0,o.Cy)(t,e),enabled:!!t,staleTime:3e4})}function x(e){let t=i.t.getState().token;t&&(0,o.BX)(t,e).catch(()=>{})}function h(){let e=(0,i.t)(e=>e.token),t=(0,n.NL)();return(0,a.D)({mutationFn:t=>(0,o.Er)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:l.users()})}})}function f(){let e=(0,i.t)(e=>e.token);return(0,r.a)({queryKey:d.list(),queryFn:()=>(0,o.xp)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function m(){let e=(0,i.t)(e=>e.token),t=(0,n.NL)();return(0,a.D)({mutationFn:t=>(0,o.Qz)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:d.list()})}})}function y(){let e=(0,i.t)(e=>e.token);return(0,r.a)({queryKey:l.employees(),queryFn:()=>(0,o.vG)(e),enabled:!!e,refetchOnWindowFocus:!0,staleTime:6e4})}function g(){let e=(0,i.t)(e=>e.token),t=(0,n.NL)();return(0,a.D)({mutationFn:t=>(0,o.r8)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:l.employees()})}})}},3321:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/adamabdullahi/Documents/Js_portfolio/stillPlay/microservices/my-workspace/apps/stillPlay-admin/app/dashboard/layout.tsx#default`)}};